{"version":3,"sources":["x-pageloader.js"],"names":["findOutputForSlider","element","idVal","id","outputs","document","getElementsByTagName","i","length","htmlFor","getSliderOutputPosition","slider","newPlace","minValue","style","window","getComputedStyle","sliderWidth","parseInt","getPropertyValue","getAttribute","newPoint","value","position","factory","define","requirejs","r","rndKey","Date","getTime","onError","toString","err","message","indexOf","call","exports","module","emptyFunction","parseURL","href","isWindowLocation","isNotAPI","re","windowLocation","isSupportHistoryAPI","replace","protocol","host","settings","RegExp","current","base","_pathname","_protocol","test","_host","_search","anchorElement","result","exec","pathname","search","hash","relative","nohash","_href","_hostname","_port","_hash","_relative","_nohash","_special","storageInitialize","sessionStorage","global","setItem","sessionStorageKey","removeItem","_e_","getItem","key","cookie","split","pop","shift","state","historyObject","JSON","stringify","stateStorage","parse","addEvent","eventNamePrefix","redefineProperty","object","prop","descriptor","onWrapped","testOnly","set","isDefinedSetter","isDefinedGetter","get","configurable","defineProperty","__defineGetter__","__defineSetter__","originalValue","removeEvent","onpopstate","setTimeout","triggerEventsInWindowAttributes","temp","Object","create","getPrototypeOf","bind","constructor","prototype","prepareDescriptorsForObject","locationDescriptors","addEventListener","event","listener","capture","eventsList","push","arguments","removeEventListener","list","splice","dispatchEvent","eventObject","eventType","type","target","props","onhashchange","len","dispatch","firePopState","o","createEvent","createEventObject","initEvent","fireInitialState","isFireInitialState","changeState","url","lastURLValue","lastURL","isUsedHistoryLocationFlag","urlObject","isSupportStateObjectInHistory","onHashChange","fireNow","checkUrlForPopState","oldURLObject","newURLObject","oldURL","newURL","onLoad","noScroll","e","scrollToAnchorId","locationObject","anchorTarget","nodeName","parentNode","onAnchorClick","srcElement","defaultPrevented","returnValue","expect","preventDefault","getElementById","rect","getBoundingClientRect","scrollTo","documentElement","scrollLeft","top","scrollTop","clientTop","this","history","customOrigin","location","windowHistory","historyPushState","pushState","historyReplaceState","replaceState","ua","navigator","userAgent","createElement","addEventListenerName","removeEventListenerName","dispatchEventName","basepath","redirect","init","lastTitle","title","eventsDescriptors","fastFixChrome","method","args","isNeedFix","apply","historyDescriptors","setup","self","path","t","assign","reload","flag","origin","hostname","port","scripts","src","a","data","hasOwnProperty","n","substr","readyState","root","amd","Spinner","createEl","tag","el","ins","parent","appendChild","addAnimation","alpha","trail","lines","name","join","start","z","Math","max","prefix","useCssAnimations","substring","toLowerCase","pre","animations","sheet","insertRule","cssRules","vendor","pp","s","charAt","toUpperCase","slice","undefined","prefixes","css","merge","obj","def","getColor","color","idx","opts","defaults","width","radius","scale","corners","opacity","rotate","direction","speed","fps","zIndex","className","left","shadow","hwaccel","spin","stop","insertBefore","firstChild","setAttribute","f","ostep","astep","anim","j","timeout","clearTimeout","removeChild","fill","height","background","boxShadow","transformOrigin","transform","borderRadius","seg","animation","val","childNodes","styleSheet","probe","behavior","adj","vml","attr","addRule","grp","coordsize","coordorigin","dx","filter","g","rotation","arcsize","margin","c","require","Error","jQuery","$","fn","each","$this","spinner","extend","presets","tiny","small","large","PG8","PG8Data","PageLoader","thisLink","nextLink","thisPage","startPage","nextPage","maxPages","maxedOut","ajaxPageLoader","content","children","wrapAll","encodeURI","holder","handler","append","$window","on","next","parents","before","show","loader","firstPage","firstTop","offset","firstLink","winTop","pusher","scrollOffset","bottom","outerHeight","pushDelay","infinScroll","$document","scrollHeight","scrollPosition","scrollLastPage","scrollDiff","infinOffset","infinFooter","trigger","infinDelay","isFunction","after","spinOpts","hide","page","link","load","$navLink","remove","is","prev","loaded","scroll","analytics","animate","scrollDelay","ga","_gaq","refresh","$s","$t","autoDispose","contains","timeago","prepareData","isNaN","datetime","cutoff","abs","distance","text","inWords","trim","localeTitle","toLocaleString","isTime","date","timestamp","refreshMillis","allowPast","allowFuture","strings","prefixAgo","prefixFromNow","suffixAgo","suffixFromNow","inPast","seconds","minute","minutes","hour","hours","day","days","month","months","year","years","wordSeparator","numbers","distanceMillis","substitute","stringOrFunction","number","string","$l","suffix","words","round","separator","iso8601","elem","tagName","functions","dispose","refresh_el","proxy","_timeagoInterval","setInterval","update","updateFromDOM","clearInterval","action","options","Array","topSpacing","bottomSpacing","wrapperClassName","center","getWidthFrom","widthFromWrapper","responsiveWidth","sticked","windowHeight","scroller","documentHeight","dwh","extra","l","elementTop","stickyWrapper","etse","stickyElement","currentTop","z-index","removeClass","newTop","newWidth","addClass","stickyWrapperContainer","resizer","methods","stickyId","wrapperId","wrapper","outerWidth","marginLeft","marginRight","float","setWrapperHeight","setupChangeListeners","MutationObserver","mutations","addedNodes","removedNodes","observe","subtree","childList","unstick","that","unstickyElement","removeIdx","unwrap","attachEvent","sticky","error","sliders","querySelectorAll","forEach","output","classList","newPosition","owlCarousel","autoplay","autoplayTimeout","smartSpeed","autoWidth","loop","nav","items","responsiveClass","responsive","0","400","navText","not","getMeta","callback","img","Image","onload","catChange","checked","find","console","log","all","serie","seriesCount","totalseriescount","seriesLeft","total","serienname","isEdit","overflow","display","padding","seriesCounterText","seriesCounterTag","prepend","html","rules","min","hasClass","largeImg","foundImg","dir","lastIndexOf","ext","alert","foto","karikatur","usertype","winners","section","shortlist","today","ajaxState","doAjax","filters","w","y","category","pg","paged","per_page","filter_series","setSection","q","series_name","series","ajax","success","post","seriesName","postCaption","seriesClass","winner","winnerBadge","caption","thumb","fullname","wt","stagger","cYear","cache","getFullYear","serializeArray","uid","v","contents","p","closest","tab","back","mainH"],"mappings":"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","file":"x-pageloader.js","sourcesContent":["/*!\n * History API JavaScript Library v4.2.8\n *\n * Support: IE8+, FF3+, Opera 9+, Safari, Chrome and other\n *\n * Copyright 2011-2017, Dmitrii Pakhtinov ( spb.piksel@gmail.com )\n *\n * http://spb-piksel.ru/\n *\n * MIT license:\n *   http://www.opensource.org/licenses/mit-license.php\n *\n * Update: 2017-03-01 12:07\n */\n(function(factory) {\n  if (typeof define === 'function' && define['amd']) {\n    if (typeof requirejs !== 'undefined') {\n      // https://github.com/devote/HTML5-History-API/issues/73\n      var r = requirejs,\n          rndKey = '[history' + (new Date()).getTime() + ']';\n      var onError = r['onError'];\n      factory.toString = function() {\n        return rndKey;\n      };\n      r['onError'] = function(err) {\n        if (err.message.indexOf(rndKey) === -1) {\n          onError.call(r, err);\n        }\n      };\n    }\n    define([], factory);\n  }\n  // commonJS support\n  if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n    module['exports'] = factory();\n  } else {\n    // execute anyway\n    return factory();\n  }\n})(function() {\n  // Define global variable\n  var global = (typeof window === 'object' ? window : this) || {};\n  // Prevent the code from running if there is no window.history object or library already loaded\n  if (!global.history || \"emulate\" in global.history) return global.history;\n  // symlink to document\n  var document = global.document;\n  // HTML element\n  var documentElement = document.documentElement;\n  // symlink to constructor of Object\n  var Object = global['Object'];\n  // symlink to JSON Object\n  var JSON = global['JSON'];\n  // symlink to instance object of 'Location'\n  var windowLocation = global.location;\n  // symlink to instance object of 'History'\n  var windowHistory = global.history;\n  // new instance of 'History'. The default is a reference to the original object instance\n  var historyObject = windowHistory;\n  // symlink to method 'history.pushState'\n  var historyPushState = windowHistory.pushState;\n  // symlink to method 'history.replaceState'\n  var historyReplaceState = windowHistory.replaceState;\n  // if the browser supports HTML5-History-API\n  var isSupportHistoryAPI = isSupportHistoryAPIDetect();\n  // verifies the presence of an object 'state' in interface 'History'\n  var isSupportStateObjectInHistory = 'state' in windowHistory;\n  // symlink to method 'Object.defineProperty'\n  var defineProperty = Object.defineProperty;\n  // new instance of 'Location', for IE8 will use the element HTMLAnchorElement, instead of pure object\n  var locationObject = redefineProperty({}, 't') ? {} : document.createElement('a');\n  // prefix for the names of events\n  var eventNamePrefix = '';\n  // String that will contain the name of the method\n  var addEventListenerName = global.addEventListener ? 'addEventListener' : (eventNamePrefix = 'on') && 'attachEvent';\n  // String that will contain the name of the method\n  var removeEventListenerName = global.removeEventListener ? 'removeEventListener' : 'detachEvent';\n  // String that will contain the name of the method\n  var dispatchEventName = global.dispatchEvent ? 'dispatchEvent' : 'fireEvent';\n  // reference native methods for the events\n  var addEvent = global[addEventListenerName];\n  var removeEvent = global[removeEventListenerName];\n  var dispatch = global[dispatchEventName];\n  // default settings\n  var settings = {\"basepath\": '/', \"redirect\": 0, \"type\": '/', \"init\": 0};\n  // key for the sessionStorage\n  var sessionStorageKey = '__historyAPI__';\n  // Anchor Element for parseURL function\n  var anchorElement = document.createElement('a');\n  // last URL before change to new URL\n  var lastURL = windowLocation.href;\n  // Control URL, need to fix the bug in Opera\n  var checkUrlForPopState = '';\n  // for fix on Safari 8\n  var triggerEventsInWindowAttributes = 1;\n  // trigger event 'onpopstate' on page load\n  var isFireInitialState = false;\n  // if used history.location of other code\n  var isUsedHistoryLocationFlag = 0;\n  // store a list of 'state' objects in the current session\n  var stateStorage = {};\n  // in this object will be stored custom handlers\n  var eventsList = {};\n  // stored last title\n  var lastTitle = document.title;\n  // store a custom origin\n  var customOrigin;\n\n  /**\n   * Properties that will be replaced in the global\n   * object 'window', to prevent conflicts\n   *\n   * @type {Object}\n   */\n  var eventsDescriptors = {\n    \"onhashchange\": null,\n    \"onpopstate\": null\n  };\n\n  /**\n   * Fix for Chrome in iOS\n   * See https://github.com/devote/HTML5-History-API/issues/29\n   */\n  var fastFixChrome = function(method, args) {\n    var isNeedFix = global.history !== windowHistory;\n    if (isNeedFix) {\n      global.history = windowHistory;\n    }\n    method.apply(windowHistory, args);\n    if (isNeedFix) {\n      global.history = historyObject;\n    }\n  };\n\n  /**\n   * Properties that will be replaced/added to object\n   * 'window.history', includes the object 'history.location',\n   * for a complete the work with the URL address\n   *\n   * @type {Object}\n   */\n  var historyDescriptors = {\n    /**\n     * Setting library initialization\n     *\n     * @param {null|String} [basepath] The base path to the site; defaults to the root \"/\".\n     * @param {null|String} [type] Substitute the string after the anchor; by default \"/\".\n     * @param {null|Boolean} [redirect] Enable link translation.\n     */\n    \"setup\": function(basepath, type, redirect) {\n      settings[\"basepath\"] = ('' + (basepath == null ? settings[\"basepath\"] : basepath))\n        .replace(/(?:^|\\/)[^\\/]*$/, '/');\n      settings[\"type\"] = type == null ? settings[\"type\"] : type;\n      settings[\"redirect\"] = redirect == null ? settings[\"redirect\"] : !!redirect;\n    },\n    /**\n     * @namespace history\n     * @param {String} [type]\n     * @param {String} [basepath]\n     */\n    \"redirect\": function(type, basepath) {\n      historyObject['setup'](basepath, type);\n      basepath = settings[\"basepath\"];\n      if (global.top == global.self) {\n        var relative = parseURL(null, false, true)._relative;\n        var path = windowLocation.pathname + windowLocation.search;\n        if (isSupportHistoryAPI) {\n          path = path.replace(/([^\\/])$/, '$1/');\n          if (relative != basepath && (new RegExp(\"^\" + basepath + \"$\", \"i\")).test(path)) {\n            windowLocation.replace(relative);\n          }\n        } else if (path != basepath) {\n          path = path.replace(/([^\\/])\\?/, '$1/?');\n          if ((new RegExp(\"^\" + basepath, \"i\")).test(path)) {\n            windowLocation.replace(basepath + '#' + path.\n              replace(new RegExp(\"^\" + basepath, \"i\"), settings[\"type\"]) + windowLocation.hash);\n          }\n        }\n      }\n    },\n    /**\n     * The method adds a state object entry\n     * to the history.\n     *\n     * @namespace history\n     * @param {Object} state\n     * @param {string} title\n     * @param {string} [url]\n     */\n    pushState: function(state, title, url) {\n      var t = document.title;\n      if (lastTitle != null) {\n        document.title = lastTitle;\n      }\n      historyPushState && fastFixChrome(historyPushState, arguments);\n      changeState(state, url);\n      document.title = t;\n      lastTitle = title;\n    },\n    /**\n     * The method updates the state object,\n     * title, and optionally the URL of the\n     * current entry in the history.\n     *\n     * @namespace history\n     * @param {Object} state\n     * @param {string} title\n     * @param {string} [url]\n     */\n    replaceState: function(state, title, url) {\n      var t = document.title;\n      if (lastTitle != null) {\n        document.title = lastTitle;\n      }\n      delete stateStorage[windowLocation.href];\n      historyReplaceState && fastFixChrome(historyReplaceState, arguments);\n      changeState(state, url, true);\n      document.title = t;\n      lastTitle = title;\n    },\n    /**\n     * Object 'history.location' is similar to the\n     * object 'window.location', except that in\n     * HTML4 browsers it will behave a bit differently\n     *\n     * @namespace history\n     */\n    \"location\": {\n      set: function(value) {\n        if (isUsedHistoryLocationFlag === 0) isUsedHistoryLocationFlag = 1;\n        global.location = value;\n      },\n      get: function() {\n        if (isUsedHistoryLocationFlag === 0) isUsedHistoryLocationFlag = 1;\n        return locationObject;\n      }\n    },\n    /**\n     * A state object is an object representing\n     * a user interface state.\n     *\n     * @namespace history\n     */\n    \"state\": {\n      get: function() {\n        if (typeof stateStorage[windowLocation.href] === 'object') {\n          return JSON.parse(JSON.stringify(stateStorage[windowLocation.href]));\n        } else if(typeof stateStorage[windowLocation.href] !== 'undefined') {\n          return stateStorage[windowLocation.href];\n        } else {\n          return null;\n        }\n      }\n    }\n  };\n\n  /**\n   * Properties for object 'history.location'.\n   * Object 'history.location' is similar to the\n   * object 'window.location', except that in\n   * HTML4 browsers it will behave a bit differently\n   *\n   * @type {Object}\n   */\n  var locationDescriptors = {\n    /**\n     * Navigates to the given page.\n     *\n     * @namespace history.location\n     */\n    assign: function(url) {\n      if (!isSupportHistoryAPI && ('' + url).indexOf('#') === 0) {\n        changeState(null, url);\n      } else {\n        windowLocation.assign(url);\n      }\n    },\n    /**\n     * Reloads the current page.\n     *\n     * @namespace history.location\n     */\n    reload: function(flag) {\n      windowLocation.reload(flag);\n    },\n    /**\n     * Removes the current page from\n     * the session history and navigates\n     * to the given page.\n     *\n     * @namespace history.location\n     */\n    replace: function(url) {\n      if (!isSupportHistoryAPI && ('' + url).indexOf('#') === 0) {\n        changeState(null, url, true);\n      } else {\n        windowLocation.replace(url);\n      }\n    },\n    /**\n     * Returns the current page's location.\n     *\n     * @namespace history.location\n     */\n    toString: function() {\n      return this.href;\n    },\n    /**\n     * Returns the current origin.\n     *\n     * @namespace history.location\n     */\n    \"origin\": {\n      get: function() {\n        if (customOrigin !== void 0) {\n          return customOrigin;\n        }\n        if (!windowLocation.origin) {\n          return windowLocation.protocol + \"//\" + windowLocation.hostname + (windowLocation.port ? ':' + windowLocation.port: '');\n        }\n        return windowLocation.origin;\n      },\n      set: function(value) {\n        customOrigin = value;\n      }\n    },\n    /**\n     * Returns the current page's location.\n     * Can be set, to navigate to another page.\n     *\n     * @namespace history.location\n     */\n    \"href\": isSupportHistoryAPI ? null : {\n      get: function() {\n        return parseURL()._href;\n      }\n    },\n    /**\n     * Returns the current page's protocol.\n     *\n     * @namespace history.location\n     */\n    \"protocol\": null,\n    /**\n     * Returns the current page's host and port number.\n     *\n     * @namespace history.location\n     */\n    \"host\": null,\n    /**\n     * Returns the current page's host.\n     *\n     * @namespace history.location\n     */\n    \"hostname\": null,\n    /**\n     * Returns the current page's port number.\n     *\n     * @namespace history.location\n     */\n    \"port\": null,\n    /**\n     * Returns the current page's path only.\n     *\n     * @namespace history.location\n     */\n    \"pathname\": isSupportHistoryAPI ? null : {\n      get: function() {\n        return parseURL()._pathname;\n      }\n    },\n    /**\n     * Returns the current page's search\n     * string, beginning with the character\n     * '?' and to the symbol '#'\n     *\n     * @namespace history.location\n     */\n    \"search\": isSupportHistoryAPI ? null : {\n      get: function() {\n        return parseURL()._search;\n      }\n    },\n    /**\n     * Returns the current page's hash\n     * string, beginning with the character\n     * '#' and to the end line\n     *\n     * @namespace history.location\n     */\n    \"hash\": isSupportHistoryAPI ? null : {\n      set: function(value) {\n        changeState(null, ('' + value).replace(/^(#|)/, '#'), false, lastURL);\n      },\n      get: function() {\n        return parseURL()._hash;\n      }\n    }\n  };\n\n  /**\n   * Just empty function\n   *\n   * @return void\n   */\n  function emptyFunction() {\n    // dummy\n  }\n\n  /**\n   * Prepares a parts of the current or specified reference for later use in the library\n   *\n   * @param {string} [href]\n   * @param {boolean} [isWindowLocation]\n   * @param {boolean} [isNotAPI]\n   * @return {Object}\n   */\n  function parseURL(href, isWindowLocation, isNotAPI) {\n    var re = /(?:([a-zA-Z0-9\\-]+\\:))?(?:\\/\\/(?:[^@]*@)?([^\\/:\\?#]+)(?::([0-9]+))?)?([^\\?#]*)(?:(\\?[^#]+)|\\?)?(?:(#.*))?/;\n    if (href != null && href !== '' && !isWindowLocation) {\n      var current = parseURL(),\n          base = document.getElementsByTagName('base')[0];\n      if (!isNotAPI && base && base.getAttribute('href')) {\n        // Fix for IE ignoring relative base tags.\n        // See http://stackoverflow.com/questions/3926197/html-base-tag-and-local-folder-path-with-internet-explorer\n        base.href = base.href;\n        current = parseURL(base.href, null, true);\n      }\n      var _pathname = current._pathname, _protocol = current._protocol;\n      // convert to type of string\n      href = '' + href;\n      // convert relative link to the absolute\n      href = /^(?:\\w+\\:)?\\/\\//.test(href) ? href.indexOf(\"/\") === 0\n        ? _protocol + href : href : _protocol + \"//\" + current._host + (\n        href.indexOf(\"/\") === 0 ? href : href.indexOf(\"?\") === 0\n          ? _pathname + href : href.indexOf(\"#\") === 0\n          ? _pathname + current._search + href : _pathname.replace(/[^\\/]+$/g, '') + href\n        );\n    } else {\n      href = isWindowLocation ? href : windowLocation.href;\n      // if current browser not support History-API\n      if (!isSupportHistoryAPI || isNotAPI) {\n        // get hash fragment\n        href = href.replace(/^[^#]*/, '') || \"#\";\n        // form the absolute link from the hash\n        // https://github.com/devote/HTML5-History-API/issues/50\n        href = windowLocation.protocol.replace(/:.*$|$/, ':') + '//' + windowLocation.host + settings['basepath']\n          + href.replace(new RegExp(\"^#[\\/]?(?:\" + settings[\"type\"] + \")?\"), \"\");\n      }\n    }\n    // that would get rid of the links of the form: /../../\n    anchorElement.href = href;\n    // decompose the link in parts\n    var result = re.exec(anchorElement.href);\n    // host name with the port number\n    var host = result[2] + (result[3] ? ':' + result[3] : '');\n    // folder\n    var pathname = result[4] || '/';\n    // the query string\n    var search = result[5] || '';\n    // hash\n    var hash = result[6] === '#' ? '' : (result[6] || '');\n    // relative link, no protocol, no host\n    var relative = pathname + search + hash;\n    // special links for set to hash-link, if browser not support History API\n    var nohash = pathname.replace(new RegExp(\"^\" + settings[\"basepath\"], \"i\"), settings[\"type\"]) + search;\n    // result\n    return {\n      _href: result[1] + '//' + host + relative,\n      _protocol: result[1],\n      _host: host,\n      _hostname: result[2],\n      _port: result[3] || '',\n      _pathname: pathname,\n      _search: search,\n      _hash: hash,\n      _relative: relative,\n      _nohash: nohash,\n      _special: nohash + hash\n    }\n  }\n\n  /**\n   * Detect HistoryAPI support while taking into account false positives.\n   * Based on https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n   */\n  function isSupportHistoryAPIDetect(){\n    var ua = global.navigator.userAgent;\n    // We only want Android 2 and 4.0, stock browser, and not Chrome which identifies\n    // itself as 'Mobile Safari' as well, nor Windows Phone (issue #1471).\n    if ((ua.indexOf('Android 2.') !== -1 ||\n      (ua.indexOf('Android 4.0') !== -1)) &&\n      ua.indexOf('Mobile Safari') !== -1 &&\n      ua.indexOf('Chrome') === -1 &&\n      ua.indexOf('Windows Phone') === -1)\n    {\n      return false;\n    }\n    // Return the regular check\n    return !!historyPushState;\n  }\n\n  /**\n   * Initializing storage for the custom state's object\n   */\n  function storageInitialize() {\n    var sessionStorage;\n    /**\n     * sessionStorage throws error when cookies are disabled\n     * Chrome content settings when running the site in a Facebook IFrame.\n     * see: https://github.com/devote/HTML5-History-API/issues/34\n     * and: http://stackoverflow.com/a/12976988/669360\n     */\n    try {\n      sessionStorage = global['sessionStorage'];\n      sessionStorage.setItem(sessionStorageKey + 't', '1');\n      sessionStorage.removeItem(sessionStorageKey + 't');\n    } catch(_e_) {\n      sessionStorage = {\n        getItem: function(key) {\n          var cookie = document.cookie.split(key + \"=\");\n          return cookie.length > 1 && cookie.pop().split(\";\").shift() || 'null';\n        },\n        setItem: function(key, value) {\n          var state = {};\n          // insert one current element to cookie\n          if (state[windowLocation.href] = historyObject.state) {\n            document.cookie = key + '=' + JSON.stringify(state);\n          }\n        }\n      }\n    }\n\n    try {\n      // get cache from the storage in browser\n      stateStorage = JSON.parse(sessionStorage.getItem(sessionStorageKey)) || {};\n    } catch(_e_) {\n      stateStorage = {};\n    }\n\n    // hang up the event handler to event unload page\n    addEvent(eventNamePrefix + 'unload', function() {\n      // save current state's object\n      sessionStorage.setItem(sessionStorageKey, JSON.stringify(stateStorage));\n    }, false);\n  }\n\n  /**\n   * This method is implemented to override the built-in(native)\n   * properties in the browser, unfortunately some browsers are\n   * not allowed to override all the properties and even add.\n   * For this reason, this was written by a method that tries to\n   * do everything necessary to get the desired result.\n   *\n   * @param {Object} object The object in which will be overridden/added property\n   * @param {String} prop The property name to be overridden/added\n   * @param {Object} [descriptor] An object containing properties set/get\n   * @param {Function} [onWrapped] The function to be called when the wrapper is created\n   * @return {Object|Boolean} Returns an object on success, otherwise returns false\n   */\n  function redefineProperty(object, prop, descriptor, onWrapped) {\n    var testOnly = 0;\n    // test only if descriptor is undefined\n    if (!descriptor) {\n      descriptor = {set: emptyFunction};\n      testOnly = 1;\n    }\n    // variable will have a value of true the success of attempts to set descriptors\n    var isDefinedSetter = !descriptor.set;\n    var isDefinedGetter = !descriptor.get;\n    // for tests of attempts to set descriptors\n    var test = {configurable: true, set: function() {\n      isDefinedSetter = 1;\n    }, get: function() {\n      isDefinedGetter = 1;\n    }};\n\n    try {\n      // testing for the possibility of overriding/adding properties\n      defineProperty(object, prop, test);\n      // running the test\n      object[prop] = object[prop];\n      // attempt to override property using the standard method\n      defineProperty(object, prop, descriptor);\n    } catch(_e_) {\n    }\n\n    // If the variable 'isDefined' has a false value, it means that need to try other methods\n    if (!isDefinedSetter || !isDefinedGetter) {\n      // try to override/add the property, using deprecated functions\n      if (object.__defineGetter__) {\n        // testing for the possibility of overriding/adding properties\n        object.__defineGetter__(prop, test.get);\n        object.__defineSetter__(prop, test.set);\n        // running the test\n        object[prop] = object[prop];\n        // attempt to override property using the deprecated functions\n        descriptor.get && object.__defineGetter__(prop, descriptor.get);\n        descriptor.set && object.__defineSetter__(prop, descriptor.set);\n      }\n\n      // Browser refused to override the property, using the standard and deprecated methods\n      if (!isDefinedSetter || !isDefinedGetter) {\n        if (testOnly) {\n          return false;\n        } else if (object === global) {\n          // try override global properties\n          try {\n            // save original value from this property\n            var originalValue = object[prop];\n            // set null to built-in(native) property\n            object[prop] = null;\n          } catch(_e_) {\n          }\n          // This rule for Internet Explorer 8\n          if ('execScript' in global) {\n            /**\n             * to IE8 override the global properties using\n             * VBScript, declaring it in global scope with\n             * the same names.\n             */\n            global['execScript']('Public ' + prop, 'VBScript');\n            global['execScript']('var ' + prop + ';', 'JavaScript');\n          } else {\n            try {\n              /**\n               * This hack allows to override a property\n               * with the set 'configurable: false', working\n               * in the hack 'Safari' to 'Mac'\n               */\n              defineProperty(object, prop, {value: emptyFunction});\n            } catch(_e_) {\n              if (prop === 'onpopstate') {\n                /**\n                 * window.onpopstate fires twice in Safari 8.0.\n                 * Block initial event on window.onpopstate\n                 * See: https://github.com/devote/HTML5-History-API/issues/69\n                 */\n                addEvent('popstate', descriptor = function() {\n                  removeEvent('popstate', descriptor, false);\n                  var onpopstate = object.onpopstate;\n                  // cancel initial event on attribute handler\n                  object.onpopstate = null;\n                  setTimeout(function() {\n                    // restore attribute value after short time\n                    object.onpopstate = onpopstate;\n                  }, 1);\n                }, false);\n                // cancel trigger events on attributes in object the window\n                triggerEventsInWindowAttributes = 0;\n              }\n            }\n          }\n          // set old value to new variable\n          object[prop] = originalValue;\n\n        } else {\n          // the last stage of trying to override the property\n          try {\n            try {\n              // wrap the object in a new empty object\n              var temp = Object.create(object);\n              defineProperty(Object.getPrototypeOf(temp) === object ? temp : object, prop, descriptor);\n              for(var key in object) {\n                // need to bind a function to the original object\n                if (typeof object[key] === 'function') {\n                  temp[key] = object[key].bind(object);\n                }\n              }\n              try {\n                // to run a function that will inform about what the object was to wrapped\n                onWrapped.call(temp, temp, object);\n              } catch(_e_) {\n              }\n              object = temp;\n            } catch(_e_) {\n              // sometimes works override simply by assigning the prototype property of the constructor\n              defineProperty(object.constructor.prototype, prop, descriptor);\n            }\n          } catch(_e_) {\n            // all methods have failed\n            return false;\n          }\n        }\n      }\n    }\n\n    return object;\n  }\n\n  /**\n   * Adds the missing property in descriptor\n   *\n   * @param {Object} object An object that stores values\n   * @param {String} prop Name of the property in the object\n   * @param {Object|null} descriptor Descriptor\n   * @return {Object} Returns the generated descriptor\n   */\n  function prepareDescriptorsForObject(object, prop, descriptor) {\n    descriptor = descriptor || {};\n    // the default for the object 'location' is the standard object 'window.location'\n    object = object === locationDescriptors ? windowLocation : object;\n    // setter for object properties\n    descriptor.set = (descriptor.set || function(value) {\n      object[prop] = value;\n    });\n    // getter for object properties\n    descriptor.get = (descriptor.get || function() {\n      return object[prop];\n    });\n    return descriptor;\n  }\n\n  /**\n   * Wrapper for the methods 'addEventListener/attachEvent' in the context of the 'window'\n   *\n   * @param {String} event The event type for which the user is registering\n   * @param {Function} listener The method to be called when the event occurs.\n   * @param {Boolean} capture If true, capture indicates that the user wishes to initiate capture.\n   * @return void\n   */\n  function addEventListener(event, listener, capture) {\n    if (event in eventsList) {\n      // here stored the event listeners 'popstate/hashchange'\n      eventsList[event].push(listener);\n    } else {\n      // FireFox support non-standart four argument aWantsUntrusted\n      // https://github.com/devote/HTML5-History-API/issues/13\n      if (arguments.length > 3) {\n        addEvent(event, listener, capture, arguments[3]);\n      } else {\n        addEvent(event, listener, capture);\n      }\n    }\n  }\n\n  /**\n   * Wrapper for the methods 'removeEventListener/detachEvent' in the context of the 'window'\n   *\n   * @param {String} event The event type for which the user is registered\n   * @param {Function} listener The parameter indicates the Listener to be removed.\n   * @param {Boolean} capture Was registered as a capturing listener or not.\n   * @return void\n   */\n  function removeEventListener(event, listener, capture) {\n    var list = eventsList[event];\n    if (list) {\n      for(var i = list.length; i--;) {\n        if (list[i] === listener) {\n          list.splice(i, 1);\n          break;\n        }\n      }\n    } else {\n      removeEvent(event, listener, capture);\n    }\n  }\n\n  /**\n   * Wrapper for the methods 'dispatchEvent/fireEvent' in the context of the 'window'\n   *\n   * @param {Event|String} event Instance of Event or event type string if 'eventObject' used\n   * @param {*} [eventObject] For Internet Explorer 8 required event object on this argument\n   * @return {Boolean} If 'preventDefault' was called the value is false, else the value is true.\n   */\n  function dispatchEvent(event, eventObject) {\n    var eventType = ('' + (typeof event === \"string\" ? event : event.type)).replace(/^on/, '');\n    var list = eventsList[eventType];\n    if (list) {\n      // need to understand that there is one object of Event\n      eventObject = typeof event === \"string\" ? eventObject : event;\n      if (eventObject.target == null) {\n        // need to override some of the properties of the Event object\n        for(var props = ['target', 'currentTarget', 'srcElement', 'type']; event = props.pop();) {\n          // use 'redefineProperty' to override the properties\n          eventObject = redefineProperty(eventObject, event, {\n            get: event === 'type' ? function() {\n              return eventType;\n            } : function() {\n              return global;\n            }\n          });\n        }\n      }\n      if (triggerEventsInWindowAttributes) {\n        // run function defined in the attributes 'onpopstate/onhashchange' in the 'window' context\n        ((eventType === 'popstate' ? global.onpopstate : global.onhashchange)\n          || emptyFunction).call(global, eventObject);\n      }\n      // run other functions that are in the list of handlers\n      for(var i = 0, len = list.length; i < len; i++) {\n        list[i].call(global, eventObject);\n      }\n      return true;\n    } else {\n      return dispatch(event, eventObject);\n    }\n  }\n\n  /**\n   * dispatch current state event\n   */\n  function firePopState() {\n    var o = document.createEvent ? document.createEvent('Event') : document.createEventObject();\n    if (o.initEvent) {\n      o.initEvent('popstate', false, false);\n    } else {\n      o.type = 'popstate';\n    }\n    o.state = historyObject.state;\n    // send a newly created events to be processed\n    dispatchEvent(o);\n  }\n\n  /**\n   * fire initial state for non-HTML5 browsers\n   */\n  function fireInitialState() {\n    if (isFireInitialState) {\n      isFireInitialState = false;\n      firePopState();\n    }\n  }\n\n  /**\n   * Change the data of the current history for HTML4 browsers\n   *\n   * @param {Object} state\n   * @param {string} [url]\n   * @param {Boolean} [replace]\n   * @param {string} [lastURLValue]\n   * @return void\n   */\n  function changeState(state, url, replace, lastURLValue) {\n    if (!isSupportHistoryAPI) {\n      // if not used implementation history.location\n      if (isUsedHistoryLocationFlag === 0) isUsedHistoryLocationFlag = 2;\n      // normalization url\n      var urlObject = parseURL(url, isUsedHistoryLocationFlag === 2 && ('' + url).indexOf(\"#\") !== -1);\n      // if current url not equal new url\n      if (urlObject._relative !== parseURL()._relative) {\n        // if empty lastURLValue to skip hash change event\n        lastURL = lastURLValue;\n        if (replace) {\n          // only replace hash, not store to history\n          windowLocation.replace(\"#\" + urlObject._special);\n        } else {\n          // change hash and add new record to history\n          windowLocation.hash = urlObject._special;\n        }\n      }\n    } else {\n      lastURL = windowLocation.href;\n    }\n    if (!isSupportStateObjectInHistory && state) {\n      stateStorage[windowLocation.href] = state;\n    }\n    isFireInitialState = false;\n  }\n\n  /**\n   * Event handler function changes the hash in the address bar\n   *\n   * @param {Event} event\n   * @return void\n   */\n  function onHashChange(event) {\n    // https://github.com/devote/HTML5-History-API/issues/46\n    var fireNow = lastURL;\n    // new value to lastURL\n    lastURL = windowLocation.href;\n    // if not empty fireNow, otherwise skipped the current handler event\n    if (fireNow) {\n      // if checkUrlForPopState equal current url, this means that the event was raised popstate browser\n      if (checkUrlForPopState !== windowLocation.href) {\n        // otherwise,\n        // the browser does not support popstate event or just does not run the event by changing the hash.\n        firePopState();\n      }\n      // current event object\n      event = event || global.event;\n\n      var oldURLObject = parseURL(fireNow, true);\n      var newURLObject = parseURL();\n      // HTML4 browser not support properties oldURL/newURL\n      if (!event.oldURL) {\n        event.oldURL = oldURLObject._href;\n        event.newURL = newURLObject._href;\n      }\n      if (oldURLObject._hash !== newURLObject._hash) {\n        // if current hash not equal previous hash\n        dispatchEvent(event);\n      }\n    }\n  }\n\n  /**\n   * The event handler is fully loaded document\n   *\n   * @param {*} [noScroll]\n   * @return void\n   */\n  function onLoad(noScroll) {\n    // Get rid of the events popstate when the first loading a document in the webkit browsers\n    setTimeout(function() {\n      // hang up the event handler for the built-in popstate event in the browser\n      addEvent('popstate', function(e) {\n        // set the current url, that suppress the creation of the popstate event by changing the hash\n        checkUrlForPopState = windowLocation.href;\n        // for Safari browser in OS Windows not implemented 'state' object in 'History' interface\n        // and not implemented in old HTML4 browsers\n        if (!isSupportStateObjectInHistory) {\n          e = redefineProperty(e, 'state', {get: function() {\n            return historyObject.state;\n          }});\n        }\n        // send events to be processed\n        dispatchEvent(e);\n      }, false);\n    }, 0);\n    // for non-HTML5 browsers\n    if (!isSupportHistoryAPI && noScroll !== true && \"location\" in historyObject) {\n      // scroll window to anchor element\n      scrollToAnchorId(locationObject.hash);\n      // fire initial state for non-HTML5 browser after load page\n      fireInitialState();\n    }\n  }\n\n  /**\n   * Finds the closest ancestor anchor element (including the target itself).\n   *\n   * @param {HTMLElement} target The element to start scanning from.\n   * @return {HTMLElement} An element which is the closest ancestor anchor.\n   */\n  function anchorTarget(target) {\n    while (target) {\n      if (target.nodeName === 'A') return target;\n      target = target.parentNode;\n    }\n  }\n\n  /**\n   * Handles anchor elements with a hash fragment for non-HTML5 browsers\n   *\n   * @param {Event} e\n   */\n  function onAnchorClick(e) {\n    var event = e || global.event;\n    var target = anchorTarget(event.target || event.srcElement);\n    var defaultPrevented = \"defaultPrevented\" in event ? event['defaultPrevented'] : event.returnValue === false;\n    if (target && target.nodeName === \"A\" && !defaultPrevented) {\n      var current = parseURL();\n      var expect = parseURL(target.getAttribute(\"href\", 2));\n      var isEqualBaseURL = current._href.split('#').shift() === expect._href.split('#').shift();\n      if (isEqualBaseURL && expect._hash) {\n        if (current._hash !== expect._hash) {\n          locationObject.hash = expect._hash;\n        }\n        scrollToAnchorId(expect._hash);\n        if (event.preventDefault) {\n          event.preventDefault();\n        } else {\n          event.returnValue = false;\n        }\n      }\n    }\n  }\n\n  /**\n   * Scroll page to current anchor in url-hash\n   *\n   * @param hash\n   */\n  function scrollToAnchorId(hash) {\n    var target = document.getElementById(hash = (hash || '').replace(/^#/, ''));\n    if (target && target.id === hash && target.nodeName === \"A\") {\n      var rect = target.getBoundingClientRect();\n      global.scrollTo((documentElement.scrollLeft || 0), rect.top + (documentElement.scrollTop || 0)\n        - (documentElement.clientTop || 0));\n    }\n  }\n\n  /**\n   * Library initialization\n   *\n   * @return {Boolean} return true if all is well, otherwise return false value\n   */\n  function initialize() {\n    /**\n     * Get custom settings from the query string\n     */\n    var scripts = document.getElementsByTagName('script');\n    var src = (scripts[scripts.length - 1] || {}).src || '';\n    var arg = src.indexOf('?') !== -1 ? src.split('?').pop() : '';\n    arg.replace(/(\\w+)(?:=([^&]*))?/g, function(a, key, value) {\n      settings[key] = (value || '').replace(/^(0|false)$/, '');\n    });\n\n    /**\n     * hang up the event handler to listen to the events hashchange\n     */\n    addEvent(eventNamePrefix + 'hashchange', onHashChange, false);\n\n    // a list of objects with pairs of descriptors/object\n    var data = [locationDescriptors, locationObject, eventsDescriptors, global, historyDescriptors, historyObject];\n\n    // if browser support object 'state' in interface 'History'\n    if (isSupportStateObjectInHistory) {\n      // remove state property from descriptor\n      delete historyDescriptors['state'];\n    }\n\n    // initializing descriptors\n    for(var i = 0; i < data.length; i += 2) {\n      for(var prop in data[i]) {\n        if (data[i].hasOwnProperty(prop)) {\n          if (typeof data[i][prop] !== 'object') {\n            // If the descriptor is a simple function, simply just assign it an object\n            data[i + 1][prop] = data[i][prop];\n          } else {\n            // prepare the descriptor the required format\n            var descriptor = prepareDescriptorsForObject(data[i], prop, data[i][prop]);\n            // try to set the descriptor object\n            if (!redefineProperty(data[i + 1], prop, descriptor, function(n, o) {\n              // is satisfied if the failed override property\n              if (o === historyObject) {\n                // the problem occurs in Safari on the Mac\n                global.history = historyObject = data[i + 1] = n;\n              }\n            })) {\n              // if there is no possibility override.\n              // This browser does not support descriptors, such as IE7\n\n              // remove previously hung event handlers\n              removeEvent(eventNamePrefix + 'hashchange', onHashChange, false);\n\n              // fail to initialize :(\n              return false;\n            }\n\n            // create a repository for custom handlers onpopstate/onhashchange\n            if (data[i + 1] === global) {\n              eventsList[prop] = eventsList[prop.substr(2)] = [];\n            }\n          }\n        }\n      }\n    }\n\n    // check settings\n    historyObject['setup']();\n\n    // redirect if necessary\n    if (settings['redirect']) {\n      historyObject['redirect']();\n    }\n\n    // initialize\n    if (settings[\"init\"]) {\n      // You agree that you will use window.history.location instead window.location\n      isUsedHistoryLocationFlag = 1;\n    }\n\n    // If browser does not support object 'state' in interface 'History'\n    if (!isSupportStateObjectInHistory && JSON) {\n      storageInitialize();\n    }\n\n    // track clicks on anchors\n    if (!isSupportHistoryAPI) {\n      document[addEventListenerName](eventNamePrefix + \"click\", onAnchorClick, false);\n    }\n\n    if (document.readyState === 'complete') {\n      onLoad(true);\n    } else {\n      if (!isSupportHistoryAPI && parseURL()._relative !== settings[\"basepath\"]) {\n        isFireInitialState = true;\n      }\n      /**\n       * Need to avoid triggering events popstate the initial page load.\n       * Hang handler popstate as will be fully loaded document that\n       * would prevent triggering event onpopstate\n       */\n      addEvent(eventNamePrefix + 'load', onLoad, false);\n    }\n\n    // everything went well\n    return true;\n  }\n\n  /**\n   * Starting the library\n   */\n  if (!initialize()) {\n    // if unable to initialize descriptors\n    // therefore quite old browser and there\n    // is no sense to continue to perform\n    return;\n  }\n\n  /**\n   * If the property history.emulate will be true,\n   * this will be talking about what's going on\n   * emulation capabilities HTML5-History-API.\n   * Otherwise there is no emulation, ie the\n   * built-in browser capabilities.\n   *\n   * @type {boolean}\n   * @const\n   */\n  historyObject['emulate'] = !isSupportHistoryAPI;\n\n  /**\n   * Replace the original methods on the wrapper\n   */\n  global[addEventListenerName] = addEventListener;\n  global[removeEventListenerName] = removeEventListener;\n  global[dispatchEventName] = dispatchEvent;\n\n  return historyObject;\n});\n\n/**\n * Copyright (c) 2011-2014 Felix Gnass\n * Licensed under the MIT license\n * http://spin.js.org/\n *\n * Example:\n    var opts = {\n      lines: 12             // The number of lines to draw\n    , length: 7             // The length of each line\n    , width: 5              // The line thickness\n    , radius: 10            // The radius of the inner circle\n    , scale: 1.0            // Scales overall size of the spinner\n    , corners: 1            // Roundness (0..1)\n    , color: '#000'         // #rgb or #rrggbb\n    , opacity: 1/4          // Opacity of the lines\n    , rotate: 0             // Rotation offset\n    , direction: 1          // 1: clockwise, -1: counterclockwise\n    , speed: 1              // Rounds per second\n    , trail: 100            // Afterglow percentage\n    , fps: 20               // Frames per second when using setTimeout()\n    , zIndex: 2e9           // Use a high z-index by default\n    , className: 'spinner'  // CSS class to assign to the element\n    , top: '50%'            // center vertically\n    , left: '50%'           // center horizontally\n    , shadow: false         // Whether to render a shadow\n    , hwaccel: false        // Whether to use hardware acceleration (might be buggy)\n    , position: 'absolute'  // Element positioning\n    }\n    var target = document.getElementById('foo')\n    var spinner = new Spinner(opts).spin(target)\n */\n;(function (root, factory) {\n\n  /* CommonJS */\n  if (typeof module == 'object' && module.exports) module.exports = factory()\n\n  /* AMD module */\n  else if (typeof define == 'function' && define.amd) define(factory)\n\n  /* Browser global */\n  else root.Spinner = factory()\n}(this, function () {\n  \"use strict\"\n\n  var prefixes = ['webkit', 'Moz', 'ms', 'O'] /* Vendor prefixes */\n    , animations = {} /* Animation rules keyed by their name */\n    , useCssAnimations /* Whether to use CSS animations or setTimeout */\n    , sheet /* A stylesheet to hold the @keyframe or VML rules. */\n\n  /**\n   * Utility function to create elements. If no tag name is given,\n   * a DIV is created. Optionally properties can be passed.\n   */\n  function createEl (tag, prop) {\n    var el = document.createElement(tag || 'div')\n      , n\n\n    for (n in prop) el[n] = prop[n]\n    return el\n  }\n\n  /**\n   * Appends children and returns the parent.\n   */\n  function ins (parent /* child1, child2, ...*/) {\n    for (var i = 1, n = arguments.length; i < n; i++) {\n      parent.appendChild(arguments[i])\n    }\n\n    return parent\n  }\n\n  /**\n   * Creates an opacity keyframe animation rule and returns its name.\n   * Since most mobile Webkits have timing issues with animation-delay,\n   * we create separate rules for each line/segment.\n   */\n  function addAnimation (alpha, trail, i, lines) {\n    var name = ['opacity', trail, ~~(alpha * 100), i, lines].join('-')\n      , start = 0.01 + i/lines * 100\n      , z = Math.max(1 - (1-alpha) / trail * (100-start), alpha)\n      , prefix = useCssAnimations.substring(0, useCssAnimations.indexOf('Animation')).toLowerCase()\n      , pre = prefix && '-' + prefix + '-' || ''\n\n    if (!animations[name]) {\n      sheet.insertRule(\n        '@' + pre + 'keyframes ' + name + '{' +\n        '0%{opacity:' + z + '}' +\n        start + '%{opacity:' + alpha + '}' +\n        (start+0.01) + '%{opacity:1}' +\n        (start+trail) % 100 + '%{opacity:' + alpha + '}' +\n        '100%{opacity:' + z + '}' +\n        '}', sheet.cssRules.length)\n\n      animations[name] = 1\n    }\n\n    return name\n  }\n\n  /**\n   * Tries various vendor prefixes and returns the first supported property.\n   */\n  function vendor (el, prop) {\n    var s = el.style\n      , pp\n      , i\n\n    prop = prop.charAt(0).toUpperCase() + prop.slice(1)\n    if (s[prop] !== undefined) return prop\n    for (i = 0; i < prefixes.length; i++) {\n      pp = prefixes[i]+prop\n      if (s[pp] !== undefined) return pp\n    }\n  }\n\n  /**\n   * Sets multiple style properties at once.\n   */\n  function css (el, prop) {\n    for (var n in prop) {\n      el.style[vendor(el, n) || n] = prop[n]\n    }\n\n    return el\n  }\n\n  /**\n   * Fills in default values.\n   */\n  function merge (obj) {\n    for (var i = 1; i < arguments.length; i++) {\n      var def = arguments[i]\n      for (var n in def) {\n        if (obj[n] === undefined) obj[n] = def[n]\n      }\n    }\n    return obj\n  }\n\n  /**\n   * Returns the line color from the given string or array.\n   */\n  function getColor (color, idx) {\n    return typeof color == 'string' ? color : color[idx % color.length]\n  }\n\n  // Built-in defaults\n\n  var defaults = {\n    lines: 12             // The number of lines to draw\n  , length: 7             // The length of each line\n  , width: 5              // The line thickness\n  , radius: 10            // The radius of the inner circle\n  , scale: 1.0            // Scales overall size of the spinner\n  , corners: 1            // Roundness (0..1)\n  , color: '#000'         // #rgb or #rrggbb\n  , opacity: 1/4          // Opacity of the lines\n  , rotate: 0             // Rotation offset\n  , direction: 1          // 1: clockwise, -1: counterclockwise\n  , speed: 1              // Rounds per second\n  , trail: 100            // Afterglow percentage\n  , fps: 20               // Frames per second when using setTimeout()\n  , zIndex: 2e9           // Use a high z-index by default\n  , className: 'spinner'  // CSS class to assign to the element\n  , top: '50%'            // center vertically\n  , left: '50%'           // center horizontally\n  , shadow: false         // Whether to render a shadow\n  , hwaccel: false        // Whether to use hardware acceleration (might be buggy)\n  , position: 'absolute'  // Element positioning\n  }\n\n  /** The constructor */\n  function Spinner (o) {\n    this.opts = merge(o || {}, Spinner.defaults, defaults)\n  }\n\n  // Global defaults that override the built-ins:\n  Spinner.defaults = {}\n\n  merge(Spinner.prototype, {\n    /**\n     * Adds the spinner to the given target element. If this instance is already\n     * spinning, it is automatically removed from its previous target b calling\n     * stop() internally.\n     */\n    spin: function (target) {\n      this.stop()\n\n      var self = this\n        , o = self.opts\n        , el = self.el = createEl(null, {className: o.className})\n\n      css(el, {\n        position: o.position\n      , width: 0\n      , zIndex: o.zIndex\n      , left: o.left\n      , top: o.top\n      })\n\n      if (target) {\n        target.insertBefore(el, target.firstChild || null)\n      }\n\n      el.setAttribute('role', 'progressbar')\n      self.lines(el, self.opts)\n\n      if (!useCssAnimations) {\n        // No CSS animation support, use setTimeout() instead\n        var i = 0\n          , start = (o.lines - 1) * (1 - o.direction) / 2\n          , alpha\n          , fps = o.fps\n          , f = fps / o.speed\n          , ostep = (1 - o.opacity) / (f * o.trail / 100)\n          , astep = f / o.lines\n\n        ;(function anim () {\n          i++\n          for (var j = 0; j < o.lines; j++) {\n            alpha = Math.max(1 - (i + (o.lines - j) * astep) % f * ostep, o.opacity)\n\n            self.opacity(el, j * o.direction + start, alpha, o)\n          }\n          self.timeout = self.el && setTimeout(anim, ~~(1000 / fps))\n        })()\n      }\n      return self\n    }\n\n    /**\n     * Stops and removes the Spinner.\n     */\n  , stop: function () {\n      var el = this.el\n      if (el) {\n        clearTimeout(this.timeout)\n        if (el.parentNode) el.parentNode.removeChild(el)\n        this.el = undefined\n      }\n      return this\n    }\n\n    /**\n     * Internal method that draws the individual lines. Will be overwritten\n     * in VML fallback mode below.\n     */\n  , lines: function (el, o) {\n      var i = 0\n        , start = (o.lines - 1) * (1 - o.direction) / 2\n        , seg\n\n      function fill (color, shadow) {\n        return css(createEl(), {\n          position: 'absolute'\n        , width: o.scale * (o.length + o.width) + 'px'\n        , height: o.scale * o.width + 'px'\n        , background: color\n        , boxShadow: shadow\n        , transformOrigin: 'left'\n        , transform: 'rotate(' + ~~(360/o.lines*i + o.rotate) + 'deg) translate(' + o.scale*o.radius + 'px' + ',0)'\n        , borderRadius: (o.corners * o.scale * o.width >> 1) + 'px'\n        })\n      }\n\n      for (; i < o.lines; i++) {\n        seg = css(createEl(), {\n          position: 'absolute'\n        , top: 1 + ~(o.scale * o.width / 2) + 'px'\n        , transform: o.hwaccel ? 'translate3d(0,0,0)' : ''\n        , opacity: o.opacity\n        , animation: useCssAnimations && addAnimation(o.opacity, o.trail, start + i * o.direction, o.lines) + ' ' + 1 / o.speed + 's linear infinite'\n        })\n\n        if (o.shadow) ins(seg, css(fill('#000', '0 0 4px #000'), {top: '2px'}))\n        ins(el, ins(seg, fill(getColor(o.color, i), '0 0 1px rgba(0,0,0,.1)')))\n      }\n      return el\n    }\n\n    /**\n     * Internal method that adjusts the opacity of a single line.\n     * Will be overwritten in VML fallback mode below.\n     */\n  , opacity: function (el, i, val) {\n      if (i < el.childNodes.length) el.childNodes[i].style.opacity = val\n    }\n\n  })\n\n\n  function initVML () {\n\n    /* Utility function to create a VML tag */\n    function vml (tag, attr) {\n      return createEl('<' + tag + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">', attr)\n    }\n\n    // No CSS transforms but VML support, add a CSS rule for VML elements:\n    sheet.addRule('.spin-vml', 'behavior:url(#default#VML)')\n\n    Spinner.prototype.lines = function (el, o) {\n      var r = o.scale * (o.length + o.width)\n        , s = o.scale * 2 * r\n\n      function grp () {\n        return css(\n          vml('group', {\n            coordsize: s + ' ' + s\n          , coordorigin: -r + ' ' + -r\n          })\n        , { width: s, height: s }\n        )\n      }\n\n      var margin = -(o.width + o.length) * o.scale * 2 + 'px'\n        , g = css(grp(), {position: 'absolute', top: margin, left: margin})\n        , i\n\n      function seg (i, dx, filter) {\n        ins(\n          g\n        , ins(\n            css(grp(), {rotation: 360 / o.lines * i + 'deg', left: ~~dx})\n          , ins(\n              css(\n                vml('roundrect', {arcsize: o.corners})\n              , { width: r\n                , height: o.scale * o.width\n                , left: o.scale * o.radius\n                , top: -o.scale * o.width >> 1\n                , filter: filter\n                }\n              )\n            , vml('fill', {color: getColor(o.color, i), opacity: o.opacity})\n            , vml('stroke', {opacity: 0}) // transparent stroke to fix color bleeding upon opacity change\n            )\n          )\n        )\n      }\n\n      if (o.shadow)\n        for (i = 1; i <= o.lines; i++) {\n          seg(i, -2, 'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')\n        }\n\n      for (i = 1; i <= o.lines; i++) seg(i)\n      return ins(el, g)\n    }\n\n    Spinner.prototype.opacity = function (el, i, val, o) {\n      var c = el.firstChild\n      o = o.shadow && o.lines || 0\n      if (c && i + o < c.childNodes.length) {\n        c = c.childNodes[i + o]; c = c && c.firstChild; c = c && c.firstChild\n        if (c) c.opacity = val\n      }\n    }\n  }\n\n  if (typeof document !== 'undefined') {\n    sheet = (function () {\n      var el = createEl('style', {type : 'text/css'})\n      ins(document.getElementsByTagName('head')[0], el)\n      return el.sheet || el.styleSheet\n    }())\n\n    var probe = css(createEl('group'), {behavior: 'url(#default#VML)'})\n\n    if (!vendor(probe, 'transform') && probe.adj) initVML()\n    else useCssAnimations = vendor(probe, 'animation')\n  }\n\n  return Spinner\n\n}));\n\n/**\n * Copyright (c) 2011-2014 Felix Gnass\n * Licensed under the MIT license\n * http://spin.js.org/\n */\n\n/*\n\nBasic Usage:\n============\n\n$('#el').spin() // Creates a default Spinner using the text color of #el.\n$('#el').spin({ ... }) // Creates a Spinner using the provided options.\n\n$('#el').spin(false) // Stops and removes the spinner.\n\nUsing Presets:\n==============\n\n$('#el').spin('small') // Creates a 'small' Spinner using the text color of #el.\n$('#el').spin('large', '#fff') // Creates a 'large' white Spinner.\n\nAdding a custom preset:\n=======================\n\n$.fn.spin.presets.flower = {\n  lines:   9\n, length: 10\n, width:  20\n, radius:  0\n}\n\n$('#el').spin('flower', 'red')\n\n*/\n\n;(function(factory) {\n\n  if (typeof exports == 'object') {\n    // CommonJS\n    factory(require('jquery'), require('spin.js'))\n  } else if (typeof define == 'function' && define.amd) {\n    // AMD, register as anonymous module\n    define(['jquery', 'spin'], factory)\n  } else {\n    // Browser globals\n    if (!window.Spinner) throw new Error('Spin.js not present')\n    factory(window.jQuery, window.Spinner)\n  }\n\n}(function($, Spinner) {\n\n  $.fn.spin = function(opts, color) {\n\n    return this.each(function() {\n      var $this = $(this)\n        , data = $this.data()\n\n      if (data.spinner) {\n        data.spinner.stop()\n        delete data.spinner\n      }\n      if (opts !== false) {\n        opts = $.extend(\n          { color: color || $this.css('color') }\n        , $.fn.spin.presets[opts] || opts\n        )\n        data.spinner = new Spinner(opts).spin(this)\n      }\n    })\n  }\n\n  $.fn.spin.presets = {\n    tiny:  { lines:  8, length: 2, width: 2, radius: 3 }\n  , small: { lines:  8, length: 4, width: 3, radius: 5 }\n  , large: { lines: 10, length: 8, width: 4, radius: 8 }\n  }\n\n}));\n\n// ==== WP AJAX PAGE LOADER 0.3.0 ==== //\n\n// WP AJAX Page Loader documentation: https://github.com/synapticism/wp-ajax-page-loader\n// Global namespace object; inspiration for the design of this via Ryan Florence: http://ryanflorence.com/authoring-jquery-plugins-with-object-oriented-javascript/\nvar PG8 = {};\n\n(function($, document, window, undefined){\n  'use strict';\n\n  // Exit early if WordPress script variables aren't available\n  if (typeof PG8Data === 'undefined') {\n    return;\n  }\n\n  // Initialize HTML5-History-API polyfill with this single line\n  var location = window.history.location || window.location;\n\n  // Constructor function\n  var PageLoader = this.PageLoader = function(opts){\n    this.thisLink = location.href;\n    this.nextLink = PG8Data.nextLink;\n    this.thisPage = parseInt(PG8Data.startPage, 10);\n    this.nextPage = this.thisPage + 1;\n    this.maxPages = parseInt(PG8Data.maxPages, 10);\n    this.maxedOut = 0; // A flag to determine whether all pages have been loaded\n    this.opts     = $.extend({}, $.fn.ajaxPageLoader.defaults, opts);\n    this.content  = $(this.opts.content);\n\n    // Initialize page loader only if there are pages to load\n    if (this.nextPage <= this.maxPages) {\n      this.init();\n    }\n  };\n\n\n\n  // Prototype functionality\n  PageLoader.prototype = {\n    init: function(){\n\n      // Wrap all the children of the main element in a way that is consistent with how content is loaded\n      this.content.children().wrapAll('<div id=\"content-page-'+parseInt(this.thisPage, 10)+'\" class=\"clear\" data-href=\"'+encodeURI(this.thisLink)+'\"></div>');\n\n      // Create the first (place)holder div that content will be loaded into\n      this.holder();\n\n      // Bind event handlers\n      this.handler();\n\n      // Initialize spinner\n      this.spinner();\n    },\n\n\n\n    // Create a placeholder; abstracted into a function for DRYness\n    holder: function(){\n      this.content.append('<div id=\"content-page-'+parseInt(this.nextPage, 10)+'\" class=\"clear\" data-href=\"'+encodeURI(this.nextLink)+'\"></div>');\n    },\n\n\n\n    // Event handlers\n    handler: function(){\n      var\n        self    = this,\n        $window = $(window);\n\n      // Bind to click events on the body element to ensure compatibility with other forms of DOM manipulation we may be doing\n      $('body').on('click', self.opts.next, function(event){\n\n        // Are there more posts to load? This has to be checked again as nextPage increments\n        if (self.nextPage <= self.maxPages) {\n\n          // Cancel page request\n          event.preventDefault();\n\n          // Invoke spinner\n          $(this).parents('nav:first').before($('#spinner').show());\n\n          // Load content\n          self.loader(self.nextPage, self.nextLink);\n        }\n      }); // end .on('click')\n\n\n\n      // Watch scroll position and change URL accordingly\n      $window.on('scroll', this.content, function(event){\n\n        // Clear previously set timer\n        clearTimeout($.data(this, 'pushTimer'));\n        clearTimeout($.data(this, 'infinTimer'));\n\n        // Manage push state based on scroll position; keeps the URL updated wherever the window position is\n        $.data(this, 'pushTimer', setTimeout(function(){\n\n          // Setup some useful variables including info about the top-most page\n          var\n            firstPage = self.content.children(':first'),\n            firstTop  = firstPage.offset().top,\n            firstLink = firstPage.data('href'),\n            winTop    = $window.scrollTop();\n\n          // Push state if the top of the window is above the first page\n          if ( winTop <= firstTop ) {\n            self.pusher(firstLink);\n          } else {\n\n            // Monitor the children of the main content selector; should be a bunch of divs representing each page of content\n            self.content.children().each(function(){\n              var\n                $this   = $(this),\n                top     = $this.offset().top - self.opts.scrollOffset,\n                bottom  = $this.outerHeight()+top;\n\n              // Push state if the top of the window falls into the range of a given page\n              if ( top <= winTop && winTop < bottom ) {\n                self.pusher($this.data('href'));\n              }\n            }); // end each()\n          } // end if\n        }, self.opts.pushDelay)); // end $.data()\n\n        // Infinite scroll, a lazy (yet smart) implementation\n        if ( self.maxedOut === 0 && self.opts.infinScroll === true ) { // Only bother with this if there are more pages to load AND infinite scroll is on\n          $.data(this, 'infinTimer', setTimeout(function() {\n            var\n              $document       = $(document),\n              scrollHeight    = $document.height(),\n              scrollPosition  = $window.height() + $window.scrollTop(), // Position of the bottom of the window\n              scrollLastPage  = self.content.children(':last').offset().top, // Bottom of the content area\n              scrollDiff      = scrollHeight - scrollPosition; // How close to the absolute bottom of the document\n\n            // Trigger a click when the bottom of the window is just below the contents of the last page\n            // But not the absolute bottom; we'd like to be able to reach the footer if we can!\n            if ( scrollPosition > scrollLastPage + self.opts.scrollOffset && scrollPosition <= scrollLastPage + self.opts.scrollOffset + self.opts.infinOffset && scrollDiff >= self.opts.infinFooter ) {\n              $(self.opts.next).trigger('click');\n            }\n          }, self.opts.infinDelay)); // end $.data()\n        } // end infinite scroll\n      }); // end $window.on('scroll')\n    }, // end handler()\n\n\n\n    // Conditionally initialize spinner div; degrades gracefully if spin.js not found\n    spinner: function(){\n      if ( $.isFunction(window.Spinner) ) {\n        this.content.after('<div id=\"spinner\" style=\"position: relative;\"></div>');\n        $('#spinner').spin(this.opts.spinOpts).hide();\n      }\n    },\n\n\n\n    pusher: function(url){\n      if (typeof url !== 'undefined' && url !== location.href) {\n        history.pushState(null,null,url);\n      }\n    },\n\n\n\n    // Page loader\n    loader: function(page, link){\n      var self = this;\n\n      // Load content into the appropriate container\n      $('#content-page-'+page).load(link+' '+self.opts.content+' > *', function(){\n\n        // Cache the next selector\n        var $navLink = $(self.opts.next);\n\n        // Update page number and nextLink\n        self.thisPage = page;\n        self.thisLink = link;\n        self.nextPage = page + 1;\n        self.nextLink = link.replace(/\\/page\\/[0-9]*/, '/page/'+self.nextPage);\n\n        // Change the URL\n        self.pusher(self.thisLink);\n\n        // Create another placeholder\n        self.holder();\n\n        // Navigation link handling: 1) have we reached the last page? 2) if not, update the link\n        if (self.nextPage > self.maxPages) {\n          $navLink.remove(); // No more content can be loaded; hide the next button or link\n          self.maxedOut = 1; // Set a flag to avoid further processing\n        } else {\n          if ( $navLink.is('[href]') ) {\n            $navLink.attr('href', self.nextLink); // Next selector has href; update it for right-clicking etc.\n          } else {\n            $('[href]', $navLink).attr('href', self.nextLink); // Next selector contains href\n          }\n        }\n\n        // Hide spinner\n        $('#spinner').hide();\n\n        // Hide previous link (if one exists)\n        $(self.opts.prev).hide();\n\n        // Emit loaded event\n        self.loaded();\n\n        // Scroll to the appropriate location\n        self.scroll();\n\n        // Update analytics with relative URL on load (not on scroll)\n        self.analytics('/'+location.href.replace(self.root(), ''));\n      });\n    }, // end loader()\n\n\n\n    // Emit the DOMContentLoaded event (for compatibility with Prism.js and other scripts)\n    loaded: function(){\n      var loaded = document.createEvent(\"Event\");\n      loaded.initEvent(\"DOMContentLoaded\", true, true);\n      window.document.dispatchEvent(loaded);\n    },\n\n\n\n    // Scroll to the top of the new content container\n    scroll: function(){\n      var top = $('#content-page-'+this.thisPage).children(':first').offset().top - this.opts.scrollOffset;\n      $('body, html').animate({ scrollTop: top }, this.opts.scrollDelay, \"swing\");\n    },\n\n\n\n    // Update Google Analytics on content load, not on scroll\n    analytics: function(url){\n      // Inform Google Analytics of the change; compatible with the new Universal Analytics script\n      if ( typeof window.ga !== 'undefined' ) {\n        window.ga('send', 'pageview', url);\n      } else if ( typeof window._gaq !== 'undefined' ) {\n        window._gaq.push(['_trackPageview', url]); // Legacy analytics; ref: https://github.com/browserstate/ajaxify/pull/25\n      }\n    },\n\n\n\n    // Utility function to get the root URL with trailing slash e.g. http(s)://yourdomain.com/\n    root: function(){\n      var\n        port = document.location.port ? ':' + document.location.port : '',\n        url = document.location.protocol + '//' + (document.location.hostname || document.location.host) + port + '/';\n      return url;\n    }\n  };\n\n\n\n  $.fn.ajaxPageLoader = function (opts){\n    return this.each(function(){\n      if (!$.data(this, 'ajaxPageLoader')) {\n        $.data(this, 'ajaxPageLoader', new PageLoader(opts));\n      }\n    });\n  };\n\n\n\n  // Extensible default settings\n  $.fn.ajaxPageLoader.defaults = {\n    content:      'main',       // The content selector; this varies from theme to theme\n    next:         '.next-page', // Selector for the \"next\" navigation link; this is also theme-dependent\n    prev:         '.prev-page', // Selector for the \"next\" navigation link; this is also theme-dependent\n    scrollDelay:  300,          // Smooth scrolling delay; use a larger value for a smoother scroll (s)\n    scrollOffset: 30,           // Scroll offset from the top of the new page to account for margins (px)\n    pushDelay:    250,          // How long to wait before attempting to update history state (s)\n    infinScroll:  true,         // Switch for infinite scrolling functionality (true/false)\n    infinDelay:   600,          // How long to wait before requesting new content automatically (s)\n    infinOffset:  300,          // Height of the area below the last page in which infinite scrolling will be triggered (px)\n    infinFooter:  1,            // Height from the bottom of the page from which infinite scrolling *won't* be triggered (px)\n    spinOpts: {                // spin.js options; reference: https://fgnass.github.io/spin.js/\n      lines:  25,\n      length: 0,\n      width:  4,\n      radius: 25,\n      speed:  1.5,\n      trail:  40,\n      top:    '15px'\n    }\n  };\n}).apply(PG8, [jQuery, document, window]);\n\n// ==== WP AJAX PAGE LOADER ==== //\n\n// Invoke the AJAX page loader; this is in its own file as the script is conditionally loaded by the theme\n// ;(function($){\n//   $(function(){\n//     $(document.body).ajaxPageLoader();\n//\n//     // If jQuery.timeago exists also update timestamps on AJAX page load; if you remove the timeago script this can be deleted\n//     if ($.timeago) {\n//       document.addEventListener(\"DOMContentLoaded\", function (event) {\n//         $('time').timeago();\n//       });\n//     }\n//   });\n// }(jQuery));\n\n/**\n * Timeago is a jQuery plugin that makes it easy to support automatically\n * updating fuzzy timestamps (e.g. \"4 minutes ago\" or \"about 1 day ago\").\n *\n * @name timeago\n * @version 1.6.1\n * @requires jQuery v1.2.3+\n * @author Ryan McGeary\n * @license MIT License - http://www.opensource.org/licenses/mit-license.php\n *\n * For usage and examples, visit:\n * http://timeago.yarp.com/\n *\n * Copyright (c) 2008-2017, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)\n */\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['jquery'], factory);\n  } else if (typeof module === 'object' && typeof module.exports === 'object') {\n    factory(require('jquery'));\n  } else {\n    // Browser globals\n    factory(jQuery);\n  }\n}(function ($) {\n  $.timeago = function(timestamp) {\n    if (timestamp instanceof Date) {\n      return inWords(timestamp);\n    } else if (typeof timestamp === \"string\") {\n      return inWords($.timeago.parse(timestamp));\n    } else if (typeof timestamp === \"number\") {\n      return inWords(new Date(timestamp));\n    } else {\n      return inWords($.timeago.datetime(timestamp));\n    }\n  };\n  var $t = $.timeago;\n\n  $.extend($.timeago, {\n    settings: {\n      refreshMillis: 60000,\n      allowPast: true,\n      allowFuture: false,\n      localeTitle: false,\n      cutoff: 0,\n      autoDispose: true,\n      strings: {\n        prefixAgo: null,\n        prefixFromNow: null,\n        suffixAgo: \"ago\",\n        suffixFromNow: \"from now\",\n        inPast: 'any moment now',\n        seconds: \"less than a minute\",\n        minute: \"about a minute\",\n        minutes: \"%d minutes\",\n        hour: \"about an hour\",\n        hours: \"about %d hours\",\n        day: \"a day\",\n        days: \"%d days\",\n        month: \"about a month\",\n        months: \"%d months\",\n        year: \"about a year\",\n        years: \"%d years\",\n        wordSeparator: \" \",\n        numbers: []\n      }\n    },\n\n    inWords: function(distanceMillis) {\n      if (!this.settings.allowPast && ! this.settings.allowFuture) {\n          throw 'timeago allowPast and allowFuture settings can not both be set to false.';\n      }\n\n      var $l = this.settings.strings;\n      var prefix = $l.prefixAgo;\n      var suffix = $l.suffixAgo;\n      if (this.settings.allowFuture) {\n        if (distanceMillis < 0) {\n          prefix = $l.prefixFromNow;\n          suffix = $l.suffixFromNow;\n        }\n      }\n\n      if (!this.settings.allowPast && distanceMillis >= 0) {\n        return this.settings.strings.inPast;\n      }\n\n      var seconds = Math.abs(distanceMillis) / 1000;\n      var minutes = seconds / 60;\n      var hours = minutes / 60;\n      var days = hours / 24;\n      var years = days / 365;\n\n      function substitute(stringOrFunction, number) {\n        var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;\n        var value = ($l.numbers && $l.numbers[number]) || number;\n        return string.replace(/%d/i, value);\n      }\n\n      var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||\n        seconds < 90 && substitute($l.minute, 1) ||\n        minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||\n        minutes < 90 && substitute($l.hour, 1) ||\n        hours < 24 && substitute($l.hours, Math.round(hours)) ||\n        hours < 42 && substitute($l.day, 1) ||\n        days < 30 && substitute($l.days, Math.round(days)) ||\n        days < 45 && substitute($l.month, 1) ||\n        days < 365 && substitute($l.months, Math.round(days / 30)) ||\n        years < 1.5 && substitute($l.year, 1) ||\n        substitute($l.years, Math.round(years));\n\n      var separator = $l.wordSeparator || \"\";\n      if ($l.wordSeparator === undefined) { separator = \" \"; }\n      return $.trim([prefix, words, suffix].join(separator));\n    },\n\n    parse: function(iso8601) {\n      var s = $.trim(iso8601);\n      s = s.replace(/\\.\\d+/,\"\"); // remove milliseconds\n      s = s.replace(/-/,\"/\").replace(/-/,\"/\");\n      s = s.replace(/T/,\" \").replace(/Z/,\" UTC\");\n      s = s.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/,\" $1$2\"); // -04:00 -> -0400\n      s = s.replace(/([\\+\\-]\\d\\d)$/,\" $100\"); // +09 -> +0900\n      return new Date(s);\n    },\n    datetime: function(elem) {\n      var iso8601 = $t.isTime(elem) ? $(elem).attr(\"datetime\") : $(elem).attr(\"title\");\n      return $t.parse(iso8601);\n    },\n    isTime: function(elem) {\n      // jQuery's `is()` doesn't play well with HTML5 in IE\n      return $(elem).get(0).tagName.toLowerCase() === \"time\"; // $(elem).is(\"time\");\n    }\n  });\n\n  // functions that can be called via $(el).timeago('action')\n  // init is default when no action is given\n  // functions are called with context of a single element\n  var functions = {\n    init: function() {\n      functions.dispose.call(this);\n      var refresh_el = $.proxy(refresh, this);\n      refresh_el();\n      var $s = $t.settings;\n      if ($s.refreshMillis > 0) {\n        this._timeagoInterval = setInterval(refresh_el, $s.refreshMillis);\n      }\n    },\n    update: function(timestamp) {\n      var date = (timestamp instanceof Date) ? timestamp : $t.parse(timestamp);\n      $(this).data('timeago', { datetime: date });\n      if ($t.settings.localeTitle) {\n        $(this).attr(\"title\", date.toLocaleString());\n      }\n      refresh.apply(this);\n    },\n    updateFromDOM: function() {\n      $(this).data('timeago', { datetime: $t.parse( $t.isTime(this) ? $(this).attr(\"datetime\") : $(this).attr(\"title\") ) });\n      refresh.apply(this);\n    },\n    dispose: function () {\n      if (this._timeagoInterval) {\n        window.clearInterval(this._timeagoInterval);\n        this._timeagoInterval = null;\n      }\n    }\n  };\n\n  $.fn.timeago = function(action, options) {\n    var fn = action ? functions[action] : functions.init;\n    if (!fn) {\n      throw new Error(\"Unknown function name '\"+ action +\"' for timeago\");\n    }\n    // each over objects here and call the requested function\n    this.each(function() {\n      fn.call(this, options);\n    });\n    return this;\n  };\n\n  function refresh() {\n    var $s = $t.settings;\n\n    //check if it's still visible\n    if ($s.autoDispose && !$.contains(document.documentElement,this)) {\n      //stop if it has been removed\n      $(this).timeago(\"dispose\");\n      return this;\n    }\n\n    var data = prepareData(this);\n\n    if (!isNaN(data.datetime)) {\n      if ( $s.cutoff === 0 || Math.abs(distance(data.datetime)) < $s.cutoff) {\n        $(this).text(inWords(data.datetime));\n      } else {\n        if ($(this).attr('title').length > 0) {\n            $(this).text($(this).attr('title'));\n        }\n      }\n    }\n    return this;\n  }\n\n  function prepareData(element) {\n    element = $(element);\n    if (!element.data(\"timeago\")) {\n      element.data(\"timeago\", { datetime: $t.datetime(element) });\n      var text = $.trim(element.text());\n      if ($t.settings.localeTitle) {\n        element.attr(\"title\", element.data('timeago').datetime.toLocaleString());\n      } else if (text.length > 0 && !($t.isTime(element) && element.attr(\"title\"))) {\n        element.attr(\"title\", text);\n      }\n    }\n    return element.data(\"timeago\");\n  }\n\n  function inWords(date) {\n    return $t.inWords(distance(date));\n  }\n\n  function distance(date) {\n    return (new Date().getTime() - date.getTime());\n  }\n\n  // fix for IE6 suckage\n  document.createElement(\"abbr\");\n  document.createElement(\"time\");\n}));\n\n// Sticky Plugin v1.0.4 for jQuery\n// =============\n// Author: Anthony Garand\n// Improvements by German M. Bravo (Kronuz) and Ruud Kamphuis (ruudk)\n// Improvements by Leonardo C. Daronco (daronco)\n// Created: 02/14/2011\n// Date: 07/20/2015\n// Website: http://stickyjs.com/\n// Description: Makes an element on the page stick on the screen as you scroll\n//              It will only set the 'top' and 'position' of your element, you\n//              might need to adjust the width in some cases.\n\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = factory(require('jquery'));\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n    var slice = Array.prototype.slice; // save ref to original slice()\n    var splice = Array.prototype.splice; // save ref to original slice()\n\n  var defaults = {\n      topSpacing: 0,\n      bottomSpacing: 0,\n      className: 'is-sticky',\n      wrapperClassName: 'sticky-wrapper',\n      center: false,\n      getWidthFrom: '',\n      widthFromWrapper: true, // works only when .getWidthFrom is empty\n      responsiveWidth: false,\n      zIndex: 'auto'\n    },\n    $window = $(window),\n    $document = $(document),\n    sticked = [],\n    windowHeight = $window.height(),\n    scroller = function() {\n      var scrollTop = $window.scrollTop(),\n        documentHeight = $document.height(),\n        dwh = documentHeight - windowHeight,\n        extra = (scrollTop > dwh) ? dwh - scrollTop : 0;\n\n      for (var i = 0, l = sticked.length; i < l; i++) {\n        var s = sticked[i],\n          elementTop = s.stickyWrapper.offset().top,\n          etse = elementTop - s.topSpacing - extra;\n\n        //update height in case of dynamic content\n        s.stickyWrapper.css('height', s.stickyElement.outerHeight());\n\n        if (scrollTop <= etse) {\n          if (s.currentTop !== null) {\n            s.stickyElement\n              .css({\n                'width': '',\n                'position': '',\n                'top': '',\n                'z-index': ''\n              });\n            s.stickyElement.parent().removeClass(s.className);\n            s.stickyElement.trigger('sticky-end', [s]);\n            s.currentTop = null;\n          }\n        }\n        else {\n          var newTop = documentHeight - s.stickyElement.outerHeight()\n            - s.topSpacing - s.bottomSpacing - scrollTop - extra;\n          if (newTop < 0) {\n            newTop = newTop + s.topSpacing;\n          } else {\n            newTop = s.topSpacing;\n          }\n          if (s.currentTop !== newTop) {\n            var newWidth;\n            if (s.getWidthFrom) {\n                newWidth = $(s.getWidthFrom).width() || null;\n            } else if (s.widthFromWrapper) {\n                newWidth = s.stickyWrapper.width();\n            }\n            if (newWidth == null) {\n                newWidth = s.stickyElement.width();\n            }\n            s.stickyElement\n              .css('width', newWidth)\n              .css('position', 'fixed')\n              .css('top', newTop)\n              .css('z-index', s.zIndex);\n\n            s.stickyElement.parent().addClass(s.className);\n\n            if (s.currentTop === null) {\n              s.stickyElement.trigger('sticky-start', [s]);\n            } else {\n              // sticky is started but it have to be repositioned\n              s.stickyElement.trigger('sticky-update', [s]);\n            }\n\n            if (s.currentTop === s.topSpacing && s.currentTop > newTop || s.currentTop === null && newTop < s.topSpacing) {\n              // just reached bottom || just started to stick but bottom is already reached\n              s.stickyElement.trigger('sticky-bottom-reached', [s]);\n            } else if(s.currentTop !== null && newTop === s.topSpacing && s.currentTop < newTop) {\n              // sticky is started && sticked at topSpacing && overflowing from top just finished\n              s.stickyElement.trigger('sticky-bottom-unreached', [s]);\n            }\n\n            s.currentTop = newTop;\n          }\n\n          // Check if sticky has reached end of container and stop sticking\n          var stickyWrapperContainer = s.stickyWrapper.parent();\n          var unstick = (s.stickyElement.offset().top + s.stickyElement.outerHeight() >= stickyWrapperContainer.offset().top + stickyWrapperContainer.outerHeight()) && (s.stickyElement.offset().top <= s.topSpacing);\n\n          if( unstick ) {\n            s.stickyElement\n              .css('position', 'absolute')\n              .css('top', '')\n              .css('bottom', 0)\n              .css('z-index', '');\n          } else {\n            s.stickyElement\n              .css('position', 'fixed')\n              .css('top', newTop)\n              .css('bottom', '')\n              .css('z-index', s.zIndex);\n          }\n        }\n      }\n    },\n    resizer = function() {\n      windowHeight = $window.height();\n\n      for (var i = 0, l = sticked.length; i < l; i++) {\n        var s = sticked[i];\n        var newWidth = null;\n        if (s.getWidthFrom) {\n            if (s.responsiveWidth) {\n                newWidth = $(s.getWidthFrom).width();\n            }\n        } else if(s.widthFromWrapper) {\n            newWidth = s.stickyWrapper.width();\n        }\n        if (newWidth != null) {\n            s.stickyElement.css('width', newWidth);\n        }\n      }\n    },\n    methods = {\n      init: function(options) {\n        var o = $.extend({}, defaults, options);\n        return this.each(function() {\n          var stickyElement = $(this);\n\n          var stickyId = stickyElement.attr('id');\n          var wrapperId = stickyId ? stickyId + '-' + defaults.wrapperClassName : defaults.wrapperClassName;\n          var wrapper = $('<div></div>')\n            .attr('id', wrapperId)\n            .addClass(o.wrapperClassName);\n\n          stickyElement.wrapAll(wrapper);\n\n          var stickyWrapper = stickyElement.parent();\n\n          if (o.center) {\n            stickyWrapper.css({width:stickyElement.outerWidth(),marginLeft:\"auto\",marginRight:\"auto\"});\n          }\n\n          if (stickyElement.css(\"float\") === \"right\") {\n            stickyElement.css({\"float\":\"none\"}).parent().css({\"float\":\"right\"});\n          }\n\n          o.stickyElement = stickyElement;\n          o.stickyWrapper = stickyWrapper;\n          o.currentTop    = null;\n\n          sticked.push(o);\n\n          methods.setWrapperHeight(this);\n          methods.setupChangeListeners(this);\n        });\n      },\n\n      setWrapperHeight: function(stickyElement) {\n        var element = $(stickyElement);\n        var stickyWrapper = element.parent();\n        if (stickyWrapper) {\n          stickyWrapper.css('height', element.outerHeight());\n        }\n      },\n\n      setupChangeListeners: function(stickyElement) {\n        if (window.MutationObserver) {\n          var mutationObserver = new window.MutationObserver(function(mutations) {\n            if (mutations[0].addedNodes.length || mutations[0].removedNodes.length) {\n              methods.setWrapperHeight(stickyElement);\n            }\n          });\n          mutationObserver.observe(stickyElement, {subtree: true, childList: true});\n        } else {\n          stickyElement.addEventListener('DOMNodeInserted', function() {\n            methods.setWrapperHeight(stickyElement);\n          }, false);\n          stickyElement.addEventListener('DOMNodeRemoved', function() {\n            methods.setWrapperHeight(stickyElement);\n          }, false);\n        }\n      },\n      update: scroller,\n      unstick: function(options) {\n        return this.each(function() {\n          var that = this;\n          var unstickyElement = $(that);\n\n          var removeIdx = -1;\n          var i = sticked.length;\n          while (i-- > 0) {\n            if (sticked[i].stickyElement.get(0) === that) {\n                splice.call(sticked,i,1);\n                removeIdx = i;\n            }\n          }\n          if(removeIdx !== -1) {\n            unstickyElement.unwrap();\n            unstickyElement\n              .css({\n                'width': '',\n                'position': '',\n                'top': '',\n                'float': '',\n                'z-index': ''\n              })\n            ;\n          }\n        });\n      }\n    };\n\n  // should be more efficient than using $window.scroll(scroller) and $window.resize(resizer):\n  if (window.addEventListener) {\n    window.addEventListener('scroll', scroller, false);\n    window.addEventListener('resize', resizer, false);\n  } else if (window.attachEvent) {\n    window.attachEvent('onscroll', scroller);\n    window.attachEvent('onresize', resizer);\n  }\n\n  $.fn.sticky = function(method) {\n    if (methods[method]) {\n      return methods[method].apply(this, slice.call(arguments, 1));\n    } else if (typeof method === 'object' || !method ) {\n      return methods.init.apply( this, arguments );\n    } else {\n      $.error('Method ' + method + ' does not exist on jQuery.sticky');\n    }\n  };\n\n  $.fn.unstick = function(method) {\n    if (methods[method]) {\n      return methods[method].apply(this, slice.call(arguments, 1));\n    } else if (typeof method === 'object' || !method ) {\n      return methods.unstick.apply( this, arguments );\n    } else {\n      $.error('Method ' + method + ' does not exist on jQuery.sticky');\n    }\n  };\n  $(function() {\n    setTimeout(scroller, 0);\n  });\n}));\n\n// Find output DOM associated to the DOM element passed as parameter\nfunction findOutputForSlider( element ) {\n   var idVal = element.id;\n   outputs = document.getElementsByTagName( 'output' );\n   for( var i = 0; i < outputs.length; i++ ) {\n     if ( outputs[ i ].htmlFor == idVal )\n       return outputs[ i ];\n   }\n}\n\nfunction getSliderOutputPosition( slider ) {\n  // Update output position\n  var newPlace,\n      minValue;\n\n  var style = window.getComputedStyle( slider, null );\n  // Measure width of range input\n  sliderWidth = parseInt( style.getPropertyValue( 'width' ), 10 );\n\n  // Figure out placement percentage between left and right of input\n  if ( !slider.getAttribute( 'min' ) ) {\n    minValue = 0;\n  } else {\n    minValue = slider.getAttribute( 'min' );\n  }\n  var newPoint = ( slider.value - minValue ) / ( slider.getAttribute( 'max' ) - minValue );\n\n  // Prevent bubble from going beyond left or right (unsupported browsers)\n  if ( newPoint < 0 ) {\n    newPlace = 0;\n  } else if ( newPoint > 1 ) {\n    newPlace = sliderWidth;\n  } else {\n    newPlace = sliderWidth * newPoint;\n  }\n\n  return {\n    'position': newPlace + 'px'\n  }\n}\n\ndocument.addEventListener( 'DOMContentLoaded', function () {\n  // Get all document sliders\n  var sliders = document.querySelectorAll( 'input[type=\"range\"].slider' );\n  [].forEach.call( sliders, function ( slider ) {\n    var output = findOutputForSlider( slider );\n    if ( output ) {\n      if ( slider.classList.contains( 'has-output-tooltip' ) ) {\n        // Get new output position\n        var newPosition = getSliderOutputPosition( slider );\n\n        // Set output position\n        output.style[ 'left' ] = newPosition.position;\n      }\n\n      // Add event listener to update output when slider value change\n      slider.addEventListener( 'input', function( event ) {\n        if ( event.target.classList.contains( 'has-output-tooltip' ) ) {\n          // Get new output position\n          var newPosition = getSliderOutputPosition( event.target );\n\n          // Set output position\n          output.style[ 'left' ] = newPosition.position;\n        }\n\n        // Update output with slider value\n        output.value = event.target.value;\n      } );\n    }\n  } );\n} );\n\n// ==== FOOTER ==== //\n\n// A simple wrapper for all your custom jQuery that belongs in the footer\n;(function($){\n  $(function(){\n\n    headerStuff();\n    carouselInit();\n    uploadFormStuff();\n    regFormHacks();\n\n    // set default filters\n    var today = new Date();\n    var page, winners, query, section, shortlist;\n\n    if( $('body').hasClass('page-id-78') ) { page = 'teilnehmer'; }\n    else if( $('body').hasClass('page-id-82') ) { page = 'archiv'; }\n    else if( $('body').hasClass('page-id-199') ) { page = 'shortlist'; }\n    else { page = 'other'; }\n\n\n    // if ($('body').hasClass('page-template-template_upload') || $('body').hasClass('page-template-template_bildwervaltung') || $('body').hasClass('page-template-template_login-register')) {\n    //   // user upload pages\n    //   console.log('user upload page');\n    //   var $buoop = {required:{e:-4,f:-3,o:-3,s:-1,c:-3},insecure:true,unsupported:true,mobile:false,api:2018.10,test:true };\n    //   function $buo_f(){\n    //   var e = document.createElement(\"script\");\n    //   e.src = \"//browser-update.org/update.min.js\";\n    //   document.body.appendChild(e);\n    //   };\n    //   try {document.addEventListener(\"DOMContentLoaded\", $buo_f,false)}\n    //   catch(e){window.attachEvent(\"onload\", $buo_f)}\n    //\n    // }\n\n    console.log('WP API > '+page);\n\n    wpAPIstuff2();\n\n    $('.past-years.notice').on('click', function(){\n      var t = $(this).closest('section');\n      if( ! t.hasClass('is-active') ) {\n        // open\n        t.addClass('is-active')\n        $(this).parent().find('.fetch.wait').trigger('fetchit');\n      } else {\n        // close\n        t.removeClass('is-active');\n      }\n    });\n\n    $('.single-info .back').on('click', function(){\n      window.history.back();\n    });\n\n\n\n\n    function wpAPIstuff2() {\n\n      var target = '#results'; // default\n\n      // set winners bool depending on page\n      if(page == 'teilnehmer') {\n        winners = 'EXCLUDE,photo_prize_first,das_scharfe_sehen_1,cartoon_prize_1,cartoon_prize_2,cartoon_prize_3'; // ,photo_public,cartoon_public\n      }\n      else if(page == 'archiv') {\n        // winners = 'INCLUDE,photo_prize_first,das_scharfe_sehen_1,das_scharfe_sehen_2,cartoon_prize_1,cartoon_prize_2,cartoon_prize_3,series_prize_1';\n        winners = 'INCLUDE,das_scharfe_sehen_1,das_scharfe_sehen_2,cartoon_prize_1,cartoon_prize_2,cartoon_prize_3,series_prize_1,photo_prize_first,photo_prize_2,photo_prize_3,photo_public,cartoon_public';\n        section = $('#archiv').data('section');\n        target = '.section.winners .columns';\n      }\n      else if(page == 'shortlist') {\n        winners = null;\n        shortlist = true;\n      }\n      else { winners = null; }\n      // console.log('winners');\n\n      $('.tabs li:first').addClass('is-active');\n\n      var filters = {\n        target: target,\n        category: $('.tabs li:first').data('category'),\n        year: today.getFullYear() - 1,\n        search: null,\n        page: page,\n        section: section,\n        winners: winners,\n        paged: 1,\n        per_page: 20,\n        filter_series: true,\n        shortlist: shortlist\n      };\n      console.log('filters:');\n      console.log(filters);\n\n\n      // read current filters {} object and update results without text search\n      function ajaxState() {\n        doAjax({\n          target: filters.target,\n          w: filters.winners,\n          y: filters.year,\n          c: filters.category,\n          s: filters.search,\n          pg: filters.paged,\n          pp: filters.per_page,\n          filter_series: filters.filter_series,\n          shortlist: filters.shortlist\n        });\n      }\n\n      function setSection() {\n        var s = filters.section;\n        var w = $('#archiv');\n        console.log('setSection(): ' + s);\n\n        if(s == 'winners') {\n          filters.winners = 'INCLUDE,das_scharfe_sehen_1,das_scharfe_sehen_2,cartoon_prize_1,cartoon_prize_2,cartoon_prize_3,series_prize_1,photo_prize_first,photo_prize_2,photo_prize_3,photo_public,cartoon_public';\n          filters.target = '.section.winners .columns';\n          filters.filter_series = true;\n          filters.search = '';\n          filters.paged = 1;\n          filters.category = '';\n          w.find('*[data-section=\"winners\"]').show();\n          w.find('*[data-section=\"archive\"]').hide();\n        }\n        if(s == 'archive') {\n          filters.winners = null;\n          filters.target = '#results';\n          filters.filter_series = false;\n          filters.search = '';\n          filters.paged = 1;\n          filters.category = 'Foto';\n          w.find('*[data-section=\"winners\"]').hide();\n          w.find('*[data-section=\"archive\"]').show();\n        }\n      }\n\n\n      // populate archive with default Ajax category if empty\n      var resultsState = $('#results').data('state');\n      if(resultsState === 'empty') {\n        setSection();\n        ajaxState();\n      }\n      // else if(resultsState == 'winners') {\n      //   ajaxState();\n      //   setSection();\n      // }\n\n\n      $('#searchform').on('submit', function(){\n        var s = $(this).serializeArray();\n        s = s[0];\n        s = s.value;\n        if(!s) { s = null; }\n        filters.search = s;\n        filters.paged = 1;\n        filters.target = '#results';\n        ajaxState();\n        return false;\n      });\n\n      $('.fetch').each(function(){\n        var t = $(this);\n        var target = '#' + t.attr('id');\n        var pp = t.data('pp');\n        if(!pp) { pp = 20; }\n\n        t.on('fetchit', function(){\n          console.log('fetchit: ' + $(this).attr('id'));\n          doAjax({\n            target: target,\n            y: t.data('y'),\n            c: t.data('c'),\n            s: t.data('s'),\n            uid: t.data('uid'),\n            series_name: t.data('series'),\n            pg: 1,\n            pp: pp,\n            filter_series: true\n          });\n          t.removeClass('fetchit');\n        });\n\n        if( ! t.hasClass('wait') ) {\n          t.trigger('fetchit')\n        }\n      });\n\n      $('.slider-section .slider').on('change', function(){\n        var v = $('#filterYear').contents().text();\n        console.log(v);\n        if(filters.section !== 'winners') {\n          filters.target = '#results';\n        }\n        filters.year = v;\n        $('.more').remove();\n        ajaxState();\n      });\n\n      $('#load-more').on('click', function(){\n        $('#results').append('<div class=\"more columns is-multiline\"/>');\n        filters.paged = filters.paged + 1;\n        filters.target = '#results .more:last';\n        ajaxState();\n      });\n\n      function doAjax(q) {\n        console.log('doAjax');\n        console.log(q);\n\n        var target = q.target;\n\n        if(q.series_name) {\n          var series = true;\n        } else {\n          var series = false;\n        }\n\n        if(filters.section == 'winners') {\n          $(target+' .column .inner').remove();\n          $(target+' .column').removeClass('loaded');\n        } else {\n          $(target+' .column').remove();\n        }\n\n        $(target).addClass('is-loading');\n\n        $.ajax( {\n          method: 'GET',\n          data: q,\n          url: '/wp-json/relevanssi/v2/fetch',\n          /*    /wp-json/entries/v2/search?winners=true&year=2013&category=foto\n          */\n          success: function(data) {\n                                      console.log(data);\n            $(target).removeClass('is-loading');\n\n            if(data[0] !== 'nada') {\n\n              for(var i=0; i<data.length; i++) {\n                var post = data[i];\n\n                var seriesName = '';\n                var postCaption = '';\n\n                if(post.series_name && post.category === 'Serie') {\n                  seriesName = '<div class=\"series\">' + post.series_name + '</div>';\n                  var seriesClass = ' series-icon';\n                } else {\n                  var seriesClass = '';\n                }\n\n                if(post.winner) {\n                  var winnerBadge = ' badge-' + post.winner;\n                } else {\n                  var winnerBadge = '';\n                }\n\n                postCaption = '<div class=\"caption\">' + post.caption + '</div><div class=\"shade\"></div>';\n\n                if(post.series_name && post.category === 'Serie') {\n                  var img = '<a href=\"' + post.link + '\"><div class=\"'+winnerBadge+'\"><div class=\"image' + seriesClass + '\" style=\"background-image: url(' + post.thumb + ')\">&nbsp;</div></div><div class=\"name\">' + post.fullname + ' <span class=\"year\">(' + post.year + ')</span></div></a>' + seriesName + postCaption;\n                } else {\n                  var img = '<a href=\"' + post.link + '\"><div class=\"image' + seriesClass + winnerBadge + '\" style=\"background-image: url(' + post.thumb + ')\">&nbsp;</div><div class=\"name\">' + post.fullname + ' <span class=\"year\">(' + post.year + ')</span></div></a>' + seriesName + postCaption;\n                }\n\n\n                if (filters.section == 'winners') {\n                  img = '<div class=\"inner\">' + img + '</div>';\n                  // $('[data-prize=\"' + post.winner + '\"]').append(img);\n                  var wt = $('[data-prize=\"' + post.winner + '\"]');\n                  if( ! wt.hasClass('loaded') ) {\n                    wt.addClass('loaded').html(img);\n                  }\n                } else if (series) {\n                  var largeImg = '<img src=\"'+ post.large +'\">';\n                  $(target).append('<div class=\"slide\"><span  class=\"watermark photo\">'+ largeImg +'</span></div>');\n                } else {\n                  $(target).append('<div class=\"column is-3\" data-year=\"' + post.year + '\">' + img + '</div>');\n                }\n              }\n\n              setTimeout(function () {\n                var stagger = 0;\n                var cYear = $(target).data('current');\n\n                // console.log('not just winners');\n                $(target + ' .column').each(function(){\n                  var t = $(this);\n                  var tYear = t.data('year');\n                  if( tYear !== cYear || filters.section == 'winners' && !t.is(':empty') ) {\n                    stagger = stagger + 40;\n                    setTimeout(function () {\n                      if( t.is(':hidden') ) t.show();\n                      t.addClass('loaded');\n                    }, stagger);\n                  }\n                  else {\n                    // remove images from the year of the main image on the page\n                    t.hide();\n                  }\n                });\n                $('.pagination.is-hidden').removeClass('is-hidden');\n                $('.loadmore.is-hidden').removeClass('is-hidden');\n              }, 10);\n\n\n            } else {\n              $(target).append('<div class=\"column is-6 is-offset-3 error\"><h1>Keine Treffer</h1></div>');\n              setTimeout(function () {\n                $(target + ' .error').addClass('loaded');\n              }, 10);\n            }\n          },\n          cache: true,\n        } );\n\n      } // end doAjax()\n\n\n      // PAGINATION\n      $('.pagination .arrow').on('click', function(){\n        var t = $(this);\n        var dir = t.data('dir');\n        var p = filters.paged;\n        if(dir == 'next') {\n          // next\n          // dunno how many pages...\n          filters.paged = p + 1;\n          ajaxState();\n        } else {\n          // prev\n          if(p - 1 > 0) {\n            filters.paged = p - 1;\n            ajaxState();\n          }\n        }\n        $('.pagination .page span').text(filters.paged); // ????\n        console.log('page: ' + filters.paged);\n        return false;\n      });\n\n      // change filter object on tab click\n      $('.tabs li').on('click', function(){\n        var tabs = $(this).closest('.tabs');\n        tabs.find('.is-active').removeClass('is-active');\n        $(this).addClass('is-active');\n        var category = $(this).data('category');\n        var tab = $(this).data('tab');\n        if(category) {\n          filters.category = category;\n          filters.target = '#results';\n          filters.paged = 1;\n        }\n        else if(tab) {\n          filters.section = tab;\n          setSection();\n        }\n\n        ajaxState();\n        return false;\n      });\n\n    } // end wpAPIstuff()\n\n\n\n\n    function headerStuff() {\n      // sticky header\n      $(\"header\").sticky({ topSpacing: 0 });\n\n      // burger menu open\n      $('.navbar-burger').on('click', function() {\n        $(this).addClass('is-active');\n        $('#menu').addClass('is-active');\n      });\n\n      // nav close\n      $('#menu .close').on('click', function() {\n        $('.navbar-burger').removeClass('is-active');\n        $('#menu').removeClass('is-active');\n      });\n    }\n\n    var mainH = $(window).height() - $('#footer').height() - $('#pre-header').height() - $('#header').height();\n    $('#main, .column.side-menu').css('min-height', mainH);\n\n    // remove link to blank post in cms\n    $('.wpuf-dashboard-content.posts tbody tr').each(function(){\n      $(this).find('td:first a').contents().unwrap();\n    });\n\n\n    function carouselInit() {\n      $('.owl-carousel.autoplay').owlCarousel({\n        autoplay: true,\n        autoplayTimeout: 8000,\n        smartSpeed: 1000,\n        autoWidth: false,\n        loop: true,\n        nav: true,\n        items: 1,\n        responsiveClass: true,\n        responsive: { 0: { nav:false }, 400: { nav: true } },\n        navText: [' ', ' ']\n      });\n\n      $('.owl-carousel').not('#prizes-gallery .gallery, .owl-carousel.autoplay').owlCarousel({\n        autoWidth: false,\n        smartSpeed: 1000,\n        loop: true,\n        nav: true,\n        items: 1,\n        responsiveClass: true,\n        responsive: { 0: { nav:false }, 400: { nav: true } },\n        navText: [' ', ' ']\n      });\n\n      $('#prizes-gallery .gallery').owlCarousel({\n        autoplay: true,\n        autoplayTimeout: 8000,\n        smartSpeed: 2000,\n        autoWidth: true,\n        center: true,\n        loop: true,\n        nav: true,\n        items: 2,\n        responsiveClass: true,\n        responsive: { 0: { nav:false }, 400: { nav: true } },\n        navText: [' ', ' ']\n      });\n\n    }\n\n\n\n\n    // Find output DOM associated to the DOM element passed as parameter\n    function findOutputForSlider( element ) {\n       var idVal = element.id;\n       outputs = document.getElementsByTagName( 'output' );\n       for( var i = 0; i < outputs.length; i++ ) {\n         if ( outputs[ i ].htmlFor == idVal )\n           return outputs[ i ];\n       }\n    }\n\n    function getSliderOutputPosition( slider ) {\n      // Update output position\n      var newPlace,\n          minValue;\n\n      var style = window.getComputedStyle( slider, null );\n      // Measure width of range input\n      sliderWidth = parseInt( style.getPropertyValue( 'width' ), 10 );\n\n      // Figure out placement percentage between left and right of input\n      if ( !slider.getAttribute( 'min' ) ) {\n        minValue = 0;\n      } else {\n        minValue = slider.getAttribute( 'min' );\n      }\n      var newPoint = ( slider.value - minValue ) / ( slider.getAttribute( 'max' ) - minValue );\n\n      // Prevent bubble from going beyond left or right (unsupported browsers)\n      if ( newPoint < 0 ) {\n        newPlace = 0;\n      } else if ( newPoint > 1 ) {\n        newPlace = sliderWidth;\n      } else {\n        newPlace = sliderWidth * newPoint;\n      }\n\n      return {\n        'position': newPlace + 'px'\n      }\n    }\n\n    document.addEventListener( 'DOMContentLoaded', function () {\n      // Get all document sliders\n      var sliders = document.querySelectorAll( 'input[type=\"range\"].slider' );\n      [].forEach.call( sliders, function ( slider ) {\n        var output = findOutputForSlider( slider );\n        if ( output ) {\n          if ( slider.classList.contains( 'has-output-tooltip' ) ) {\n            // Get new output position\n            var newPosition = getSliderOutputPosition( slider );\n\n            // Set output position\n            output.style[ 'left' ] = newPosition.position;\n          }\n\n          // Add event listener to update output when slider value change\n          slider.addEventListener( 'input', function( event ) {\n            if ( event.target.classList.contains( 'has-output-tooltip' ) ) {\n              // Get new output position\n              var newPosition = getSliderOutputPosition( event.target );\n\n              // Set output position\n              output.style[ 'left' ] = newPosition.position;\n            }\n\n            // Update output with slider value\n            output.value = event.target.value;\n          } );\n        }\n      } );\n    } );\n\n\n    function uploadFormStuff() {\n      if ( $('body').hasClass('page-id-19949') || $('body').hasClass('page-id-19936') ) {\n        console.log('uploadFormStuff()');\n\n        // $('.wpuf-el').not('.kategorie').hide();\n\n        $('.wpuf-submit-button').on('click', function(){\n          setTimeout(function(){\n            console.log('fix english form errors');\n            $('.wpuf-error-msg').each(function(){\n              var text = $(this).text();\n              console.log(text);\n              if (text == 'Bildbeschriftung is required') $(this).text('Bitte Bildunterschrift hinzufügen')\n              if (text == 'Aufnahmeort is required') $(this).text('Bitte Aufnahmeort hinzufügen')\n              if (text == 'Aufnahmedatum is required') $(this).text('Bitte Aufnahmedatum hinzufügen')\n              if (text == 'Datei is required') $(this).text('Bitte Datei hinzufügen')\n              if (text == 'Please fix the errors to proceed') $(this).text('')\n              if (text == '') $(this).text('Bitte die fehlenden Felder ausfüllen um fortzufahren')\n              // if (text == '') $(this).text('')\n\n              // $(this).text(text.replace('', ''))\n            })\n          }, 100);\n        });\n\n        function getMeta(url, callback) {\n            var img = new Image();\n            img.src = url;\n            img.onload = function() { callback(this.width, this.height); }\n        }\n        var largeImg = false;\n        $(document).on('DOMSubtreeModified',function(){\n          if (!largeImg) {\n            var img = $('.wpuf-attachment-list .attachment-name img')\n\n            if (img.length) {\n              var src = img.attr('src');\n              if (src) foundImg = true;\n              var large = img.attr('alt');\n              var dir = src.substring(0, src.lastIndexOf(\"/\"));\n              var ext = src.split('.').pop();\n              largeImg = dir + '/' + large + '.' + ext;\n              console.log(largeImg);\n\n              getMeta(largeImg, function(width, height) {\n                // console.log(width + 'px ' + height + 'px');\n                if (width < 1200) {\n                  alert('Dieses Bild ist zu klein. Bitte lade in höherer Auflösung hoch.');\n                  $('a.attachment-delete').trigger('click');\n                  largeImg = false;\n                }\n              });\n            }\n          }\n        });\n\n        var state = $('#state').data('state');\n        console.log('---- state -----');\n        console.log(state);\n        console.log('----------------');\n\n        var rules = {\n          foto: { min: 2, max: 4 },\n          serie: { min: 4, max: 6 },\n          karikatur: { min: 2, max: 4 }\n        };\n\n        if (state.usertype === 'fotograf') {\n          $('input[value=\"karikatur\"]').parent().hide();\n        }\n        if (state.usertype === 'karikaturist') {\n          $('input[value=\"foto\"]').parent().hide();\n          $('input[value=\"serie\"]').parent().hide();\n          $('input[value=\"karikatur\"]').prop('checked', true);\n          catChange();\n        }\n\n        $('.wpuf-el.kategorie').on('change', function(){\n          catChange();\n        });\n\n        var url = window.location.pathname;\n        var isEdit = false\n        if (url.indexOf(\"edit\") >= 0) {\n          isEdit = true;\n          console.log('isEdit');\n          catChange();\n        }\n\n        function catChange() {\n          var checked = $('.kategorie .wpuf-fields').find('input:checked');\n          var val = checked.val();\n          console.log(val);\n\n          var all = $('.datei, .post_title, .datum, .standort, .part-2, .part-3, .wpuf-submit');\n          // var foto = $('.standort');\n          var serie = $('.serienname, .series_counter');\n          // var karikatur = $('.verleger');\n\n          all.show();\n          $('.max').hide();\n\n          if (val == 'foto') {\n            serie.hide(); // karikatur.hide(); foto.show();\n          }\n\n          else if (val == 'serie') {\n            serie.show();\n            var seriesMax = 50;\n            var seriesCount = state.totalseriescount;\n            var seriesLeft = seriesMax - seriesCount;\n\n            // set series name if it exists, disable editing it\n            // also hide if editing\n            // don't hide if there's only one series\n            if (state.total.serie >= 1) {\n              console.log('honk1');\n              if (state.serienname || isEdit) {\n                console.log('honk2');\n                $('input[name=\"serienname\"]').val(state.serienname);\n                $('li.serienname').css({ 'overflow': 'hidden', 'height': 0, 'opacity': 0, 'display': 'none !important', 'padding': 0, 'margin': 0 });\n                // $('li.serienname').css({ 'display': 'none !important'});\n              }\n            }\n\n            if (seriesLeft > 0) {\n              var seriesCounterText = 'Es wurden bereits ' + seriesCount + ' von 50 möglichen Serien eingereicht.';\n              var seriesCounterTag = '<p class=\"series_counter\" style=\"border: 1px #aaa solid; background: #FFD; padding: 0.5em 1em; margin: 0 0 2em 0; font-size: 0.9em; border-radius: 4px;\">' + seriesCounterText + '</p>';\n\n              if ($('.series_counter').length < 1) {\n                $('.part-2').prepend(seriesCounterTag);\n              }\n\n              serie.show();\n            }\n\n            else {\n              all.hide();\n              var seriesCounterText = 'Das Limit von 50 möglichen Serien-Einsendungen ist bereits erreicht.';\n              var seriesCounterTag = '<p class=\"series_counter\" style=\"border: 1px #aaa solid; background: #FFD; padding: 0.5em 1em; margin: 0 0 2em 0; font-size: 0.9em; border-radius: 4px;\">' + seriesCounterText + '</p>';\n              $('.wpuf-form .wpuf-el:first').after(seriesCounterTag);\n            }\n\n            // foto.hide(); karikatur.hide();\n            $('label[for=\"serienname\"]').html('Serientitel <span class=\"required\">*</span>');\n          }\n\n          else if (val == 'karikatur') {\n            serie.hide(); // foto.hide(); karikatur.show();\n            $('label[for=\"datum\"]').html('Erscheinungsdatum <span class=\"required\">*</span>');\n            $('label[for=\"standort\"]').html('Veröffentlicht in folgender Zeitung <span class=\"required\">*</span>');\n          }\n\n          if (state.total[val] < rules[val].max && state.total[val] < rules.val.min) {\n            // too few\n            console.log('too few '+val);\n          }\n          if (state.total[val] < rules[val].max && state.total[val] > rules.val.min) {\n            // not too few, not too many\n            console.log('not too few, not too many '+val);\n          }\n          if (state.total[val] >= rules[val].max) {\n            // max\n            console.log('max '+val);\n            all.hide();\n            serie.hide();\n\n            if (!$('.error.max').length) {\n              var text = \"Sollten Sie ihre Bildauswahl ändern wollen, löschen Sie bitte zuerst unter &bdquo;Bildaktualisierung&ldquo; die Datei/Dateien, die Sie nicht zum Wettbewerb einreichen möchten und laden dann die neuen Bilddateien hoch.\";\n              $('.kategorie').after('<li class=\"error max\"><p><b>'+text+'</b></p></li>');\n            } else {\n              $('.max').show();\n            }\n\n          }\n\n        }\n\n      }\n    }\n\n\n    function regFormHacks() {\n      if ($('body').hasClass('um-page-register')) {\n        $('#confirm_user_password-20047').attr('placeholder', 'Passwort wiederholen')\n      }\n    }\n\n\n    // .page-id-20012\n    // window.setTimeout(function(){\n      console.log('remove pw txt');\n      $('.um-field-password_reset_text div div').text('Um Ihr Passwort zurückzusetzen, geben Sie bitte Ihre E-Mail-Adresse oder Benutzernamen unten ein.');\n      $('.um-field-username_b input').attr('placeholder', 'Geben Sie Ihren Benutzernamen und Ihre E-Mail-Adresse ein.')\n    // }, 3000)\n\n    // .um-field-block div')\n    // .html('xxx Um Ihr Passwort zurückzusetzen, geben Sie bitte Ihre E-Mail-Adresse oder Benutzernamen unten ein.');\n\n  });\n\n}(jQuery));\n"]}